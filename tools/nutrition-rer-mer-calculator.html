<!doctype html>
<html lang="en" data-mode="pro" data-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author-status" content="NAVLE-candidate-unlicensed" />
    <meta name="referrer" content="strict-origin-when-cross-origin" />
    <link rel="icon" type="image/svg+xml" href="/assets/img/vet-favicon.svg" />
    <title>Nutrition RER/MER Calculator | VetLudics Tools</title>
    <meta
      name="description"
      content="RER and MER calculator for small animals with nutrition-plan factor selection and optional cup conversion."
    />
    <meta property="og:type" content="website" />
    <meta
      property="og:title"
      content="Nutrition RER/MER Calculator | VetLudics Tools"
    />
    <meta
      property="og:description"
      content="Calculate daily calorie targets and optional cups/day from kcal per cup."
    />
    <meta
      property="og:url"
      content="https://parthchaudhari.com/tools/nutrition-rer-mer-calculator.html"
    />
    <link rel="canonical" href="https://parthchaudhari.com/tools/nutrition-rer-mer-calculator.html" />
    <link rel="stylesheet" href="/assets/css/tokens.css" />
    <link rel="stylesheet" href="/assets/css/portal.css" />
    <link rel="stylesheet" href="/assets/css/calculator-dashboard.css" />
    <script src="/assets/js/theme-toggle.js" defer></script>
    <script src="/assets/js/nav-status.js" defer></script>
    <script src="/assets/js/legal-compliance.js" defer></script>
    <script src="/assets/js/nutrition-rer-mer-calculator.js" defer></script>
    <script src="/assets/js/preferences.js" defer></script>
    <script src="/assets/js/auth-system.js" defer></script>
    <script src="/assets/js/animations.js" defer></script>
  </head>
  <body class="pc-page pc-page--study no-js">
    <!-- Floating Background Elements -->
    <div class="pc-floating-elements" aria-hidden="true">
      <div class="pc-float-shape pc-float-shape--1"></div>
      <div class="pc-float-shape pc-float-shape--2"></div>
    </div>

    <!-- Modern Ambient Floating Elements -->
    <div class="pc-ambient-container" aria-hidden="true">
      <div class="pc-ambient-orb pc-ambient-orb--1"></div>
      <div class="pc-ambient-orb pc-ambient-orb--2"></div>
      <div class="pc-ambient-orb pc-ambient-orb--3"></div>
      <div class="pc-ambient-shape pc-ambient-shape--circle"></div>
      <div class="pc-ambient-shape pc-ambient-shape--square"></div>
      <div class="pc-ambient-shape pc-ambient-shape--triangle"></div>
      <div class="pc-ambient-particles">
        <div class="pc-particle"></div>
        <div class="pc-particle"></div>
        <div class="pc-particle"></div>
        <div class="pc-particle"></div>
        <div class="pc-particle"></div>
      </div>
      <div class="pc-ambient-grid"></div>
    </div>
    

    <div class="pc-toast-container" role="status" aria-live="polite" aria-atomic="true"></div>
    <!-- Mobile Menu Overlay -->
    <div class="pc-mobile-menu-overlay" aria-hidden="true"></div>
    

    
    <a class="pc-skip-link" href="#pc-main">Skip to main content</a>
    
    <nav class="pc-portal-nav" aria-label="Global portal navigation">
      <div class="pc-portal-nav__inner">
        <a class="pc-logo" href="/">
          <span class="pc-logo__icon">üêæ</span>
          <span class="pc-logo__text">VetLudics</span>
        </a>

        <!-- Search Bar (Desktop) -->
        <form class="pc-nav-search" action="/search.html" method="get" role="search">
          <div class="pc-search-wrapper">
            <svg class="pc-search-icon" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
              <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" />
            </svg>
            <input 
              type="search" 
              name="q" 
              class="pc-search-input pc-search-input--nav" 
              placeholder="Search calculators, topics..."
              aria-label="Search veterinary calculators"
              autocomplete="off"
            >
            <kbd class="pc-search-shortcut">‚åòK</kbd>
          </div>
        </form>
        <div class="pc-nav-group">
          <a class="pc-nav-link pc-nav-link--hide-mobile" href="/play/">Play</a>
          <a class="pc-nav-link pc-nav-link--hide-mobile" href="/bridge/">Bridge</a>
          <a class="pc-nav-link" href="/search.html">Search</a>
          <a class="pc-nav-link pc-nav-link--hide-mobile" href="/study/">Study</a>
          <a class="pc-nav-link" href="/account/">
            <span class="pc-auth-indicator" data-pc-auth-indicator aria-hidden="true">‚óã</span>
            <span class="pc-nav-link__text">Account</span>
          </a>
          <button type="button" class="pc-nav-toggle pc-theme-toggle" data-pc-theme-toggle aria-label="Toggle theme">
            <span class="pc-theme-icon pc-theme-icon--sun" aria-hidden="true">‚òÄÔ∏è</span>
            <span class="pc-theme-icon pc-theme-icon--moon" aria-hidden="true">üåô</span>
            <span class="pc-nav-toggle__label" data-pc-theme-label>Day</span></button>
          <!-- Mobile Menu Toggle -->
          <button type="button" class="pc-mobile-toggle" aria-label="Toggle mobile menu" aria-expanded="false" aria-controls="pc-mobile-menu">
            <span class="pc-mobile-toggle__bar"></span>
            <span class="pc-mobile-toggle__bar"></span>
            <span class="pc-mobile-toggle__bar"></span>
          </button>

        </div>
      </div>
    </nav>

    <main id="pc-main" class="pc-calc-dashboard" role="main">
      <!-- Header -->
      <header class="pc-calc-header pc-calc-animate">
        <div class="pc-calc-header__title">
          <div class="pc-calc-header__icon">üçñ</div>
          <div class="pc-calc-header__text">
            <h1>Nutrition RER/MER Calculator</h1>
            <p>Resting & maintenance energy requirements</p>
          </div>
        </div>
        <div class="pc-calc-header__actions">
          <div class="pc-calc-quick-actions">
            <button type="button" class="pc-calc-action-btn" onclick="resetCalculator()" title="Reset all fields">
              <span>‚Ü∫</span> Reset
            </button>
            <button type="button" class="pc-calc-action-btn" onclick="toggleAutoCalc()" id="auto-calc-btn" title="Toggle auto-calculation">
              <span>‚ö°</span> <span id="auto-calc-text">Auto: On</span>
            </button>
            <a href="/tools/" class="pc-calc-action-btn">
              <span>‚Üê</span> Back
            </a>
          </div>
        </div>
      </header>

      <!-- Input Panel -->
      <aside class="pc-calc-inputs pc-calc-animate pc-calc-animate--1" aria-label="Calculator inputs">
        <div class="pc-calc-panel">
          <div class="pc-calc-panel__header">
            <span class="pc-calc-panel__title">
              <span class="pc-calc-panel__icon">üìù</span>
              Patient Data
            </span>
          </div>
          <div class="pc-calc-panel__content">
            <form id="nrm-form" novalidate>
              <!-- Species -->
              <div class="pc-calc-field">
                <div class="pc-calc-field__label">
                  <span>Species</span>
                </div>
                <select id="nrm-species" class="pc-calc-input" onchange="onInputChange()">
                  <option value="dog">üêï Dog</option>
                  <option value="cat">üêà Cat</option>
                </select>
              </div>

              <!-- Weight -->
              <div class="pc-calc-field">
                <div class="pc-calc-field__label">
                  <span>Weight</span>
                  <span class="pc-calc-field__hint">kg</span>
                </div>
                <input id="nrm-weight" class="pc-calc-input pc-calc-input--number" type="number" min="0.5" step="0.1" value="10" required oninput="onInputChange()" />
                <div class="pc-calc-chips">
                  <button type="button" class="pc-calc-chip" onclick="setWeight(2.5)">2.5 kg</button>
                  <button type="button" class="pc-calc-chip" onclick="setWeight(5)">5 kg</button>
                  <button type="button" class="pc-calc-chip pc-calc-chip--active" onclick="setWeight(10)">10 kg</button>
                  <button type="button" class="pc-calc-chip" onclick="setWeight(20)">20 kg</button>
                  <button type="button" class="pc-calc-chip" onclick="setWeight(30)">30 kg</button>
                </div>
              </div>

              <!-- Nutrition Plan -->
              <div class="pc-calc-field">
                <div class="pc-calc-field__label">
                  <span>Nutrition Plan</span>
                </div>
                <select id="nrm-plan" class="pc-calc-input" onchange="onInputChange()">
                  <option value="weight_loss">Weight loss</option>
                  <option value="maintenance_neutered" selected>Maintenance (neutered)</option>
                  <option value="maintenance_intact">Maintenance (intact)</option>
                  <option value="growth_under_4mo">Growth (&lt;4 months)</option>
                  <option value="growth_over_4mo">Growth (&gt;4 months)</option>
                  <option value="recovery">Recovery / convalescence</option>
                </select>
              </div>

              <!-- Food Energy Density -->
              <div class="pc-calc-field">
                <div class="pc-calc-field__label">
                  <span>Food Energy Density</span>
                  <span class="pc-calc-field__hint">kcal/cup (optional)</span>
                </div>
                <input id="nrm-kcal-cup" class="pc-calc-input pc-calc-input--number" type="number" min="1" step="1" placeholder="e.g. 350" oninput="onInputChange()" />
                <div class="pc-calc-chips">
                  <button type="button" class="pc-calc-chip" onclick="setKcalCup(280)">280</button>
                  <button type="button" class="pc-calc-chip" onclick="setKcalCup(350)">350</button>
                  <button type="button" class="pc-calc-chip" onclick="setKcalCup(400)">400</button>
                </div>
              </div>

              <button type="submit" class="pc-calc-submit" id="calc-btn">
                <span>üßÆ</span> Calculate Energy Plan
              </button>
            </form>
          </div>
        </div>

        <!-- Related Tools -->
        <div class="pc-calc-panel pc-calc-animate pc-calc-animate--2">
          <div class="pc-calc-related">
            <div class="pc-calc-related__title">Related Tools</div>
            <div class="pc-calc-related__grid">
              <a href="/tools/dose-calculator.html" class="pc-calc-related__item">
                <span class="pc-calc-related__icon">üíä</span>
                <span>Dosing</span>
              </a>
              <a href="/tools/fluid-calculator.html" class="pc-calc-related__item">
                <span class="pc-calc-related__icon">üíß</span>
                <span>Fluids</span>
              </a>
              <a href="/body-condition-score-guide/" class="pc-calc-related__item">
                <span class="pc-calc-related__icon">üìä</span>
                <span>BCS Guide</span>
              </a>
              <a href="/tools/" class="pc-calc-related__item">
                <span class="pc-calc-related__icon">üß∞</span>
                <span>All Tools</span>
              </a>
            </div>
          </div>
        </div>
      </aside>

      <!-- Main Content -->
      <section class="pc-calc-main pc-calc-animate pc-calc-animate--2" aria-label="Energy calculation visualization">
        <div class="pc-calc-viz">
          <div class="pc-calc-viz__header">
            <span class="pc-calc-viz__title">Feeding Plan</span>
          </div>

          <!-- Energy Breakdown Cards -->
          <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; margin-bottom: 1rem;">
            <div class="pc-calc-result-card">
              <div class="pc-calc-result__label">Resting Energy (RER)</div>
              <div class="pc-calc-result__value" style="font-size: 1.5rem;">
                <span id="viz-rer">--</span>
                <span class="pc-calc-result__unit">kcal/day</span>
              </div>
              <div class="pc-calc-result__context">Base metabolic requirement</div>
            </div>
            <div class="pc-calc-result-card">
              <div class="pc-calc-result__label">Maintenance Energy (MER)</div>
              <div class="pc-calc-result__value" style="font-size: 1.5rem;">
                <span id="viz-mer">--</span>
                <span class="pc-calc-result__unit">kcal/day</span>
              </div>
              <div class="pc-calc-result__context">Adjusted for life stage</div>
            </div>
          </div>

          <!-- Factor Display -->
          <div class="pc-calc-result-card pc-calc-result-card--success" style="margin-bottom: 1rem;">
            <div style="display: flex; align-items: center; justify-content: space-between;">
              <div>
                <div class="pc-calc-result__label">Applied Factor</div>
                <div style="font-size: 1.25rem; font-weight: 600;" id="viz-factor">-- x RER</div>
              </div>
              <div style="text-align: right;">
                <div class="pc-calc-result__label">Plan Type</div>
                <div style="font-size: 0.875rem; color: var(--calc-text);" id="viz-plan-name">Maintenance (neutered)</div>
              </div>
            </div>
          </div>

          <!-- Formula Display -->
          <div class="pc-calc-formula">
            <div class="pc-calc-formula__label">Calculation Formulas</div>
            <div class="pc-calc-formula__math" id="formula-display">
              <span class="pc-calc-formula__highlight">RER</span> = 70 √ó (Weight kg)<sup>0.75</sup><br>
              <span class="pc-calc-formula__highlight">MER</span> = RER √ó Life Stage Factor<br>
              <span class="pc-calc-formula__highlight">Cups/day</span> = MER √∑ kcal per cup
            </div>
          </div>

          <!-- Cup Conversion Display -->
          <div class="pc-calc-result-card pc-calc-result-card--warning" id="cup-result-card" style="margin-bottom: 1rem;">
            <div class="pc-calc-result__label">
              <span>ü•£</span> Feeding Amount
            </div>
            <div class="pc-calc-result__value">
              <span id="viz-cups">--</span>
              <span class="pc-calc-result__unit">cups/day</span>
            </div>
            <div class="pc-calc-result__context" id="viz-cup-context">Enter food energy density to calculate</div>
          </div>

          <!-- Quick Tips -->
          <div style="margin-top: auto; padding-top: 1rem; border-top: 1px solid var(--calc-glass-border);">
            <div style="font-size: 0.75rem; font-weight: 600; color: var(--calc-text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.75rem;">
              üí° Clinical Pearls
            </div>
            <ul style="font-size: 0.8125rem; color: var(--calc-text-muted); line-height: 1.8; margin: 0; padding-left: 1.25rem;">
              <li>Use ideal body weight for overweight patients</li>
              <li>Adjust based on body condition score trends every 2-4 weeks</li>
              <li>Consider concurrent disease when selecting factors</li>
              <li>Cup sizes vary by brand; verify with actual measuring cup</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- Results Panel -->
      <aside class="pc-calc-results pc-calc-animate pc-calc-animate--3" aria-label="Calculation results" aria-live="polite">
        <div class="pc-calc-panel">
          <div class="pc-calc-panel__header">
            <span class="pc-calc-panel__title">
              <span class="pc-calc-panel__icon">üìä</span>
              Results
            </span>
            <button type="button" class="pc-calc-copy" onclick="copyResults()" title="Copy results">
              üìã
            </button>
          </div>
          <div class="pc-calc-panel__content">
            <!-- Primary Result - MER -->
            <div class="pc-calc-result-card pc-calc-result-card--primary" id="result-primary">
              <div class="pc-calc-result__label">
                <span>üî•</span> Daily Calories (MER)
              </div>
              <div class="pc-calc-result__value">
                <span id="result-mer">--</span>
                <span class="pc-calc-result__unit">kcal/day</span>
              </div>
              <div class="pc-calc-result__context" id="mer-context">Target daily energy intake</div>
            </div>

            <!-- Secondary Results -->
            <div class="pc-calc-result-card">
              <div class="pc-calc-result__label">
                <span>‚ö°</span> Resting Energy (RER)
              </div>
              <div class="pc-calc-result__value">
                <span id="result-rer">--</span>
                <span class="pc-calc-result__unit">kcal/day</span>
              </div>
              <div class="pc-calc-result__context">Base metabolic rate</div>
            </div>

            <div class="pc-calc-result-card">
              <div class="pc-calc-result__label">
                <span>ü•£</span> Cups Per Day
              </div>
              <div class="pc-calc-result__value">
                <span id="result-cups">--</span>
                <span class="pc-calc-result__unit">cups</span>
              </div>
              <div class="pc-calc-result__context" id="cups-context">Based on food density</div>
            </div>

            <div class="pc-calc-result-card pc-calc-result-card--success">
              <div class="pc-calc-result__label">
                <span>üìà</span> Factor Applied
              </div>
              <div class="pc-calc-result__value">
                <span id="result-factor">--</span>
                <span class="pc-calc-result__unit">√ó RER</span>
              </div>
              <div class="pc-calc-result__context" id="factor-context">Life stage multiplier</div>
            </div>

            <!-- Progress indicator -->
            <div class="pc-calc-progress" style="margin-top: 1rem;">
              <div class="pc-calc-progress__bar" id="calc-progress" style="width: 100%"></div>
            </div>
          </div>
        </div>

        <!-- Factor Reference -->
        <div class="pc-calc-panel pc-calc-animate pc-calc-animate--4">
          <div class="pc-calc-panel__content" style="padding: 1rem;">
            <div style="font-size: 0.75rem; font-weight: 600; color: var(--calc-text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.75rem;">
              üìã Factor Reference
            </div>
            <div style="font-size: 0.75rem; line-height: 1.6;">
              <div style="display: flex; justify-content: space-between; padding: 0.375rem 0; border-bottom: 1px solid var(--calc-glass-border);">
                <span>Weight loss</span>
                <span style="font-weight: 500;">1.0 (dog), 0.8 (cat)</span>
              </div>
              <div style="display: flex; justify-content: space-between; padding: 0.375rem 0; border-bottom: 1px solid var(--calc-glass-border);">
                <span>Maintenance neutered</span>
                <span style="font-weight: 500;">1.6 (dog), 1.2 (cat)</span>
              </div>
              <div style="display: flex; justify-content: space-between; padding: 0.375rem 0; border-bottom: 1px solid var(--calc-glass-border);">
                <span>Maintenance intact</span>
                <span style="font-weight: 500;">1.8 (dog), 1.4 (cat)</span>
              </div>
              <div style="display: flex; justify-content: space-between; padding: 0.375rem 0; border-bottom: 1px solid var(--calc-glass-border);">
                <span>Growth &lt;4 months</span>
                <span style="font-weight: 500;">3.0 (dog), 2.5 (cat)</span>
              </div>
              <div style="display: flex; justify-content: space-between; padding: 0.375rem 0;">
                <span>Recovery</span>
                <span style="font-weight: 500;">1.0 (both)</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Disclaimer -->
        <div style="padding: 0.75rem; font-size: 0.6875rem; color: var(--calc-text-muted); text-align: center; line-height: 1.5;">
          Educational planning tool only. Adjust to body-condition trends and clinician goals.
        </div>
      </aside>
    </main>

    <footer class="pc-footer pc-footer--enhanced pc-footer--minimal" style="margin-top: 0;">
      <div class="pc-footer__bottom">
        <div class="pc-footer__legal">
          <a href="/">Home</a>
          <a href="/tools/">Tools</a>
          <a href="/reference/">References</a>
          <a href="/privacy/">Privacy</a>
        </div>
        <p class="pc-footer__copyright">¬© 2025 VetLudics. Not a substitute for professional veterinary advice.</p>
      </div>
    </footer>

    <script>
      // Plan factors (synced with nutrition-rer-mer-calculator.js)
      const PLAN_FACTORS = {
        weight_loss: { dog: 1, cat: 0.8 },
        maintenance_neutered: { dog: 1.6, cat: 1.2 },
        maintenance_intact: { dog: 1.8, cat: 1.4 },
        growth_under_4mo: { dog: 3, cat: 2.5 },
        growth_over_4mo: { dog: 2, cat: 2 },
        recovery: { dog: 1, cat: 1 },
      };

      const PLAN_NAMES = {
        weight_loss: 'Weight loss',
        maintenance_neutered: 'Maintenance (neutered)',
        maintenance_intact: 'Maintenance (intact)',
        growth_under_4mo: 'Growth (<4 months)',
        growth_over_4mo: 'Growth (>4 months)',
        recovery: 'Recovery / convalescence'
      };

      // Auto-calculation toggle
      let autoCalcEnabled = true;
      
      function toggleAutoCalc() {
        autoCalcEnabled = !autoCalcEnabled;
        document.getElementById('auto-calc-text').textContent = autoCalcEnabled ? 'Auto: On' : 'Auto: Off';
        document.getElementById('auto-calc-btn').classList.toggle('pc-calc-chip--active', autoCalcEnabled);
        if (autoCalcEnabled) {
          calculateNutrition();
        }
      }

      // Input change handler
      function onInputChange() {
        updateProgress();
        if (autoCalcEnabled) {
          calculateNutrition();
        }
      }

      // Set weight from chip
      function setWeight(weight) {
        document.getElementById('nrm-weight').value = weight;
        onInputChange();
        updateChipState(event.target);
      }

      // Set kcal/cup from chip
      function setKcalCup(kcal) {
        document.getElementById('nrm-kcal-cup').value = kcal;
        onInputChange();
        updateChipState(event.target);
      }

      // Update chip visual state
      function updateChipState(clickedChip) {
        const parent = clickedChip.parentElement;
        parent.querySelectorAll('.pc-calc-chip').forEach(chip => {
          chip.classList.remove('pc-calc-chip--active');
        });
        clickedChip.classList.add('pc-calc-chip--active');
      }

      // Update progress bar
      function updateProgress() {
        const weight = document.getElementById('nrm-weight').value;
        const plan = document.getElementById('nrm-plan').value;
        
        let progress = 50; // Base progress for having weight
        if (weight && plan) progress = 100;
        
        document.getElementById('calc-progress').style.width = progress + '%';
      }

      // Calculate nutrition
      function calculateNutrition() {
        const species = document.getElementById('nrm-species').value || 'dog';
        const weight = parseFloat(document.getElementById('nrm-weight').value) || 0;
        const plan = document.getElementById('nrm-plan').value || 'maintenance_neutered';
        const kcalPerCup = parseFloat(document.getElementById('nrm-kcal-cup').value) || 0;

        if (!weight || weight <= 0) {
          return;
        }

        // Calculate RER and MER
        const rer = 70 * Math.pow(weight, 0.75);
        const factor = PLAN_FACTORS[plan]?.[species] || 1.6;
        const mer = rer * factor;

        // Update visualization cards
        document.getElementById('viz-rer').textContent = Math.round(rer).toLocaleString();
        document.getElementById('viz-mer').textContent = Math.round(mer).toLocaleString();
        document.getElementById('viz-factor').textContent = factor.toFixed(1) + ' x RER';
        document.getElementById('viz-plan-name').textContent = PLAN_NAMES[plan];

        // Update results panel
        document.getElementById('result-rer').textContent = Math.round(rer).toLocaleString();
        document.getElementById('result-mer').textContent = Math.round(mer).toLocaleString();
        document.getElementById('result-factor').textContent = factor.toFixed(1);
        document.getElementById('mer-context').textContent = `Target for ${weight} kg ${species}`;
        document.getElementById('factor-context').textContent = PLAN_NAMES[plan];

        // Cup calculation
        if (kcalPerCup > 0) {
          const cups = mer / kcalPerCup;
          document.getElementById('viz-cups').textContent = cups.toFixed(2);
          document.getElementById('viz-cup-context').textContent = `Based on ${kcalPerCup} kcal/cup`;
          document.getElementById('result-cups').textContent = cups.toFixed(2);
          document.getElementById('cups-context').textContent = `${Math.round(mer)} kcal √∑ ${kcalPerCup} kcal/cup`;
          document.getElementById('cup-result-card').style.display = 'block';
        } else {
          document.getElementById('viz-cups').textContent = '--';
          document.getElementById('viz-cup-context').textContent = 'Enter food energy density to calculate';
          document.getElementById('result-cups').textContent = '--';
          document.getElementById('cups-context').textContent = 'Enter food density';
        }
      }

      // Reset calculator
      function resetCalculator() {
        document.getElementById('nrm-species').value = 'dog';
        document.getElementById('nrm-weight').value = '10';
        document.getElementById('nrm-plan').value = 'maintenance_neutered';
        document.getElementById('nrm-kcal-cup').value = '';
        
        // Reset chip states
        document.querySelectorAll('.pc-calc-chips').forEach(container => {
          container.querySelectorAll('.pc-calc-chip').forEach((chip, index) => {
            chip.classList.toggle('pc-calc-chip--active', index === 2); // 10 kg chip
          });
        });
        
        calculateNutrition();
        showToast('Calculator reset', 'info');
      }

      // Copy results
      function copyResults() {
        const mer = document.getElementById('result-mer').textContent;
        const rer = document.getElementById('result-rer').textContent;
        const cups = document.getElementById('result-cups').textContent;
        const weight = document.getElementById('nrm-weight').value;
        const species = document.getElementById('nrm-species').value;
        
        let text = `${species.charAt(0).toUpperCase() + species.slice(1)} (${weight}kg): RER ${rer} | MER ${mer} kcal/day`;
        if (cups !== '--') {
          text += ` | ${cups} cups/day`;
        }
        
        navigator.clipboard.writeText(text).then(() => {
          const btn = document.querySelector('.pc-calc-copy');
          btn.classList.add('pc-calc-copy--copied');
          btn.textContent = '‚úì';
          showToast('Results copied to clipboard', 'success');
          setTimeout(() => {
            btn.classList.remove('pc-calc-copy--copied');
            btn.textContent = 'üìã';
          }, 2000);
        });
      }

      // Toast notification
      function showToast(message, type = 'info') {
        const container = document.querySelector('.pc-toast-container');
        const toast = document.createElement('div');
        toast.className = `pc-toast pc-toast--${type}`;
        toast.textContent = message;
        container.appendChild(toast);
        
        setTimeout(() => {
          toast.classList.add('pc-toast--show');
        }, 10);
        
        setTimeout(() => {
          toast.classList.remove('pc-toast--show');
          setTimeout(() => toast.remove(), 300);
        }, 3000);
      }

      // Initial calculation
      document.addEventListener('DOMContentLoaded', function() {
        calculateNutrition();
        updateProgress();
      });

      // Form submit handler
      document.getElementById('nrm-form').addEventListener('submit', function(e) {
        e.preventDefault();
        calculateNutrition();
        showToast('Calculation complete', 'success');
      });
    </script>
  </body>
</html>
