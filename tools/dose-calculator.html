<!doctype html>
<html lang="en" data-mode="pro" data-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="referrer" content="strict-origin-when-cross-origin" />
    <link rel="icon" type="image/png" href="/assets/img/dvmready-logo.png" />
    <link rel="manifest" href="/manifest.json" />
    <meta name="theme-color" content="#0c607d" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Dose Calculator" />
    <title>Dose Calculator | DVMReady Tools</title>
    <meta name="description" content="Free veterinary dose calculator with species, drug, concentration, and max safety checks. Basic and Advanced modes for quick or detailed calculations." />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Dose Calculator | DVMReady Tools" />
    <meta property="og:description" content="Calculate mg, mL, and daily totals with max dose warnings. Basic and Advanced modes." />
    <meta property="og:url" content="https://dvmready.com/tools/dose-calculator.html" />
    <link rel="canonical" href="https://dvmready.com/tools/dose-calculator.html" />
    <link rel="stylesheet" href="/assets/css/tokens.css" />
    <link rel="stylesheet" href="/assets/css/portal.css" />
    <link rel="stylesheet" href="/assets/css/logo-styles.css" />
    <link rel="stylesheet" href="/assets/css/unified-calculator.css" />
    <link rel="stylesheet" href="/assets/css/floating-elements.css" />
    <link rel="stylesheet" href="/assets/css/calculator-print.css" />
    <script src="/assets/js/nav-status.js" defer></script>
    <script src="/assets/js/theme-toggle.js" defer></script>
    <script src="/assets/js/unified-calculator.js" defer></script>
    <script src="/assets/js/dose-calculator.js" defer></script>
    <script src="/assets/js/legal-compliance.js" defer></script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "Veterinary Dose Calculator",
      "applicationCategory": "HealthApplication",
      "operatingSystem": "Any",
      "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" },
      "description": "Free veterinary dose calculator for dogs and cats with Basic and Advanced modes. Calculate drug doses in mg and mL with concentration, weight, and safety checks.",
      "url": "https://dvmready.com/tools/dose-calculator.html",
      "featureList": ["Basic and Advanced modes", "Species-specific dosing", "Unit conversion (kg/lb/g)", "Tablet and liquid dosing", "Safety warnings", "Offline support"]
    }
    </script>
      <link rel="stylesheet" href="/assets/css/clinic-utilities.css" />
    <script src="/assets/js/clinic-utilities.js" defer></script>
  </head>
  <body class="pc-page pc-page--study no-js">
    <!-- Ambient Background -->
    <div class="pc-ambient-container">
      <div class="pc-ambient-orb pc-ambient-orb--1"></div>
      <div class="pc-ambient-orb pc-ambient-orb--2"></div>
      <div class="pc-ambient-orb pc-ambient-orb--3"></div>
      <div class="pc-ambient-shape pc-ambient-shape--circle"></div>
      <div class="pc-ambient-shape pc-ambient-shape--square"></div>
      <div class="pc-ambient-shape pc-ambient-shape--triangle"></div>
      <div class="pc-ambient-particles" id="particles"></div>
    </div>

    <div class="pc-toast-container" role="status" aria-live="polite" aria-atomic="true"></div>
    <div class="pc-mobile-menu-overlay" aria-hidden="true"></div>

    <a class="pc-skip-link" href="#pc-main">Skip to main content</a>

    <nav class="pc-portal-nav" aria-label="Global portal navigation">
      <div class="pc-portal-nav__inner">
        <a class="pc-logo" href="/">
          <img src="/assets/img/dvmready-logo.png" alt="" class="pc-logo__img" aria-hidden="true">
          <span class="pc-logo__text">DVMReady</span>
        </a>
        <div class="pc-nav-group">
          <a class="pc-nav-link" href="/">Home</a>
          <a class="pc-nav-link pc-is-active" href="/tools/">Tools</a>
          
          <a class="pc-nav-link" href="/search.html">Search</a>
          <a class="pc-nav-link" href="/account/">
            <span class="pc-auth-indicator" data-pc-auth-indicator aria-hidden="true">‚óã</span>
            <span class="pc-nav-link__text">Account</span>
          </a>
          <button type="button" class="pc-mobile-toggle" aria-label="Toggle mobile menu" aria-expanded="false" aria-controls="pc-mobile-menu">
            <span class="pc-mobile-toggle__bar"></span>
            <span class="pc-mobile-toggle__bar"></span>
            <span class="pc-mobile-toggle__bar"></span>
          </button>
        </div>
      </div>
      <div id="pc-mobile-menu" class="pc-mobile-menu" aria-hidden="true">
        <div class="pc-mobile-menu__header">
          <span class="pc-mobile-menu__title">Menu</span>
          <button type="button" class="pc-mobile-menu__close" aria-label="Close menu">‚úï</button>
        </div>
        <nav class="pc-mobile-menu__nav">
          <a class="pc-mobile-nav-link" href="/">
            <span class="pc-mobile-nav-link__icon">üè†</span>
            <span class="pc-mobile-nav-link__text">Home</span>
          </a>
          <a class="pc-mobile-nav-link pc-is-active" href="/tools/">
            <span class="pc-mobile-nav-link__icon">üßÆ</span>
            <span class="pc-mobile-nav-link__text">Tools</span>
          </a>

          <a class="pc-mobile-nav-link" href="/search.html">
            <span class="pc-mobile-nav-link__icon">üîç</span>
            <span class="pc-mobile-nav-link__text">Search</span>
          </a>
          <a class="pc-mobile-nav-link" href="/account/">
            <span class="pc-mobile-nav-link__icon">üë§</span>
            <span class="pc-mobile-nav-link__text">Account</span>
          </a>
        </nav>
      </div>
    </nav>

    <main id="pc-main" class="calc-container" role="main">
      <!-- Header -->
      <header class="calc-header">
        <div class="calc-header__icon">üíä</div>
        <h1 class="calc-header__title">Dose Calculator</h1>
        <p class="calc-header__subtitle">Calculate drug doses with precision. Choose Basic for quick calculations or Advanced for detailed control.</p>
      </header>

      <!-- Mode Toggle -->
      <div class="calc-mode-toggle">
        <button class="calc-mode-btn active" data-mode="basic"><span>‚ö° Basic</span></button>
        <button class="calc-mode-btn" data-mode="advanced"><span>üî¨ Advanced</span></button>
      </div>

      <!-- Main Calculator Card -->
      <div class="calc-card" id="dose-calculator" data-calc="dose">
        <div class="calc-card__header">
          <h2 class="calc-card__title">
            <span id="mode-icon">‚ö°</span>
            <span id="mode-title">Quick Dose Calculation</span>
          </h2>
          <p class="calc-card__subtitle" id="mode-subtitle">Enter weight and drug details for instant results</p>
        </div>

        <div class="calc-card__body">
          <!-- Species Selection -->
          <div class="calc-form-group">
            <label class="calc-label">Species</label>
            <div class="calc-species-grid">
              <button type="button" class="calc-species-btn active" data-species="dog">
                <span class="calc-species-btn__icon">üêï</span>
                <span class="calc-species-btn__label">Dog</span>
              </button>
              <button type="button" class="calc-species-btn" data-species="cat">
                <span class="calc-species-btn__icon">üêà</span>
                <span class="calc-species-btn__label">Cat</span>
              </button>
              <button type="button" class="calc-species-btn" data-species="exotic">
                <span class="calc-species-btn__icon">ü¶ú</span>
                <span class="calc-species-btn__label">Exotic</span>
              </button>
            </div>
          </div>

          <!-- Weight Input -->
          <div class="calc-form-group">
            <label class="calc-label">
              Weight <span class="calc-label__hint">‚Äî patient body weight</span>
            </label>
            <div class="calc-input-wrapper">
              <input type="number" class="calc-input calc-input--with-unit" id="weight" placeholder="10" min="0.1" step="0.1" data-conversion="weight" data-unit="kg">
              <div class="calc-input-unit">
                <button type="button" class="calc-unit-btn active" data-unit="kg">kg</button>
                <button type="button" class="calc-unit-btn" data-unit="lb">lb</button>
                <button type="button" class="calc-unit-btn" data-unit="g">g</button>
              </div>
            </div>
            <div class="calc-chips" id="weight-presets">
              <button type="button" class="calc-chip" data-weight="2.5">2.5 kg (Toy)</button>
              <button type="button" class="calc-chip" data-weight="10">10 kg (Small)</button>
              <button type="button" class="calc-chip" data-weight="25">25 kg (Medium)</button>
              <button type="button" class="calc-chip" data-weight="35">35 kg (Large)</button>
            </div>
          </div>

          <!-- Drug Selection -->
          <div class="calc-form-group">
            <label class="calc-label">Drug <span class="calc-label__hint">‚Äî select for auto-populated dosing</span></label>
            <select class="calc-select" id="drug-select">
              <option value="">Select a drug...</option>
              <optgroup label="NSAIDs (Pain/Inflammation)">
                <option value="carprofen" data-concentration="50" data-unit="mg/tab">Carprofen (Rimadyl) ‚Äî 2.2 mg/kg SID</option>
                <option value="meloxicam" data-concentration="1.5" data-unit="mg/mL">Meloxicam (Metacam) ‚Äî 0.1 mg/kg SID</option>
              </optgroup>
              <optgroup label="Analgesics (Pain)">
                <option value="tramadol" data-concentration="50" data-unit="mg/tab">Tramadol ‚Äî 3-5 mg/kg BID</option>
                <option value="gabapentin" data-concentration="100" data-unit="mg/cap">Gabapentin ‚Äî 10-20 mg/kg BID-TID</option>
              </optgroup>
              <optgroup label="Antibiotics">
                <option value="amoxicillin" data-concentration="100" data-unit="mg/mL">Amoxicillin ‚Äî 11-22 mg/kg BID</option>
                <option value="amoxicillin_clavulanate" data-concentration="62.5" data-unit="mg/tab">Clavamox ‚Äî 12.5 mg/kg BID</option>
                <option value="cephalexin" data-concentration="250" data-unit="mg/tab">Cephalexin ‚Äî 15-30 mg/kg BID</option>
                <option value="enrofloxacin" data-concentration="50" data-unit="mg/mL">Enrofloxacin (Baytril) ‚Äî 5-10 mg/kg SID ‚ö†Ô∏è</option>
                <option value="clindamycin" data-concentration="75" data-unit="mg/cap">Clindamycin ‚Äî 5.5-11 mg/kg BID</option>
                <option value="doxycycline" data-concentration="100" data-unit="mg/tab">Doxycycline ‚Äî 5-10 mg/kg BID</option>
                <option value="metronidazole" data-concentration="250" data-unit="mg/tab">Metronidazole ‚Äî 10-15 mg/kg BID</option>
              </optgroup>
              <optgroup label="Cardiac">
                <option value="furosemide" data-concentration="12.5" data-unit="mg/tab">Furosemide ‚Äî 2-4 mg/kg BID-TID</option>
                <option value="pimobendan" data-concentration="5" data-unit="mg/tab">Pimobendan (Vetmedin) ‚Äî 0.25 mg/kg BID</option>
                <option value="benazepril" data-concentration="5" data-unit="mg/tab">Benazepril (Fortekor) ‚Äî 0.25 mg/kg SID</option>
              </optgroup>
              <optgroup label="Steroids">
                <option value="prednisone" data-concentration="5" data-unit="mg/tab">Prednisone ‚Äî 0.5-1 mg/kg BID</option>
                <option value="dexamethasone" data-concentration="2" data-unit="mg/mL">Dexamethasone ‚Äî 0.1-0.2 mg/kg SID</option>
              </optgroup>
              <optgroup label="Emergency">
                <option value="atropine" data-concentration="0.54" data-unit="mg/mL">Atropine ‚Äî 0.02-0.04 mg/kg IV</option>
                <option value="epinephrine" data-concentration="1" data-unit="mg/mL">Epinephrine ‚Äî 0.01 mg/kg (CPR/Anaphylaxis)</option>
                <option value="diazepam" data-concentration="5" data-unit="mg/mL">Diazepam ‚Äî 0.5-2 mg/kg IV/PR</option>
              </optgroup>
            </select>
            <div id="drug-warning" style="margin-top: 0.5rem; padding: 0.5rem; background: rgba(245, 158, 11, 0.1); border-left: 3px solid #f59e0b; border-radius: 4px; font-size: 0.85rem; color: var(--calc-text); display: none;"></div>
          </div>

          <!-- Dosage Form -->
          <div class="calc-form-group">
            <label class="calc-label">Form</label>
            <div class="calc-chips" id="form-selector">
              <button type="button" class="calc-chip active" data-form="tablet">üíä Tablet</button>
              <button type="button" class="calc-chip" data-form="liquid">üíâ Liquid</button>
              <button type="button" class="calc-chip" data-form="injectable">üíâ Injectable</button>
            </div>
          </div>

          <!-- Concentration -->
          <div class="calc-form-group">
            <label class="calc-label">
              Concentration <span class="calc-label__hint" id="concentration-hint">mg/tablet</span>
            </label>
            <div class="calc-input-wrapper">
              <input type="number" class="calc-input" id="concentration" placeholder="50" min="0.001" step="0.001">
            </div>
          </div>

          <!-- ADVANCED MODE: Additional Options -->
          <div class="calc-advanced" id="advanced-options" style="display: none;">
            <h3 class="calc-advanced__title">üî¨ Advanced Options</h3>
            
            <div class="calc-form-group">
              <label class="calc-label">Dose Rate <span class="calc-label__hint">mg/kg</span></label>
              <input type="number" class="calc-input" id="dose-rate" placeholder="Auto from drug" min="0.001" step="0.001">
              <div class="calc-chips">
                <button type="button" class="calc-chip" data-dose="0.1">0.1</button>
                <button type="button" class="calc-chip" data-dose="0.5">0.5</button>
                <button type="button" class="calc-chip" data-dose="1">1.0</button>
                <button type="button" class="calc-chip" data-dose="2">2.0</button>
                <button type="button" class="calc-chip" data-dose="5">5.0</button>
              </div>
            </div>

            <div class="calc-form-group">
              <label class="calc-label">Frequency</label>
              <select class="calc-select" id="frequency">
                <option value="1">Once daily (SID)</option>
                <option value="2" selected>Twice daily (BID)</option>
                <option value="3">Three times daily (TID)</option>
                <option value="4">Four times daily (QID)</option>
              </select>
            </div>

            <div class="calc-form-group">
              <label class="calc-label">Route</label>
              <select class="calc-select" id="route">
                <option value="PO">PO (By mouth)</option>
                <option value="IV">IV (Intravenous)</option>
                <option value="IM">IM (Intramuscular)</option>
                <option value="SC">SC (Subcutaneous)</option>
              </select>
            </div>

            <div class="calc-form-group">
              <label class="calc-label">
                Maximum Dose <span class="calc-label__hint">optional safety cap</span>
              </label>
              <div class="calc-input-wrapper">
                <input type="number" class="calc-input calc-input--with-unit" id="max-dose" placeholder="No limit">
                <div class="calc-input-unit">
                  <button type="button" class="calc-unit-btn active" data-unit="mg">mg</button>
                  <button type="button" class="calc-unit-btn" data-unit="g">g</button>
                </div>
              </div>
            </div>
          </div>

          <!-- Calculate Button -->
          <button type="button" class="calc-btn" id="calculate-btn">
            <span>üßÆ</span> Calculate Dose
          </button>

          <!-- Results Section -->
          <div class="calc-results" id="results" style="display: none;">
            <!-- Primary Result: Volume/Quantity -->
            <div class="calc-result-card">
              <p class="calc-result-card__label">Dose Quantity</p>
              <p class="calc-result-card__value">
                <span id="result-quantity">--</span>
                <span class="calc-result-card__unit" id="result-quantity-unit">mL</span>
              </p>
              <p class="calc-result-card__range" id="quantity-breakdown"></p>
            </div>

            <!-- Secondary Result: mg amount -->
            <div class="calc-result-card">
              <p class="calc-result-card__label">Drug Amount</p>
              <p class="calc-result-card__value">
                <span id="result-mg">--</span>
                <span class="calc-result-card__unit" id="result-mg-unit">mg</span>
              </p>
              <p class="calc-result-card__context">Total active ingredient</p>
            </div>

            <!-- Daily Total (Advanced) -->
            <div class="calc-result-card" id="daily-result" style="display: none;">
              <p class="calc-result-card__label">Daily Total</p>
              <p class="calc-result-card__value">
                <span id="result-daily">--</span>
                <span class="calc-result-card__unit" id="result-daily-unit">mg/day</span>
              </p>
            </div>

            <!-- Warnings -->
            <div class="calc-result-card__warning" id="warning-message" style="display: none;"></div>

            <!-- Action Buttons -->
            <div class="calc-actions">
              <button class="calc-action-btn" id="copy-btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
                Copy
              </button>
              <button class="calc-action-btn" onclick="window.print()">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 6 2 18 2 18 9"/><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/><rect x="6" y="14" width="12" height="8"/></svg>
                Print
              </button>
              <button class="calc-action-btn" id="reset-btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 12"/></svg>
                Reset
              </button>
            </div>

            <!-- Expandable Calculation Details -->
            <div class="calc-details">
              <button type="button" class="calc-details__trigger" aria-expanded="false">
                <span>üìã Show Calculation Details</span>
                <svg class="calc-details__trigger-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>
              </button>
              <div class="calc-details__content">
                <div class="calc-details__inner">
                  <div class="calc-info-grid" id="calculation-details">
                    <!-- Filled by JavaScript -->
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="calc-card__footer">
          <p style="font-size: 0.8rem; color: var(--calc-text-muted); margin: 0; text-align: center;">
            ‚ö†Ô∏è Educational tool only. Always verify doses with current formularies and consider patient-specific factors.
          </p>
        </div>
      </div>

      <!-- Related Tools -->
      <div style="margin-top: 2rem; text-align: center;">
        <p style="font-size: 0.875rem; color: var(--calc-text-muted); margin-bottom: 1rem;">Related Calculators</p>
        <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 0.75rem;">
          <a href="/tools/fluid-calculator.html" class="calc-chip">üíß Fluid Calculator</a>
          <a href="/tools/cri-calculator.html" class="calc-chip">üíâ CRI Calculator</a>
          <a href="/tools/emergency-drug-chart.html" class="calc-chip">üö® Emergency Drugs</a>
          <a href="/tools/exotic-dose-calculator.html" class="calc-chip">ü¶ú Exotic Dosing</a>
        </div>
      </div>
    </main>

    <script>
    // Dose Calculator Implementation
    (function() {
      'use strict';

      // Drug database - Doses verified from Plumb's Veterinary Drug Handbook (9th Ed), Merck Veterinary Manual, and FDA prescribing information
      const DRUGS = {
        // NSAIDs
        carprofen: { 
          name: 'Carprofen', 
          category: 'NSAID', 
          dogDose: '2.2 mg/kg PO q24h OR 4.4 mg/kg PO q24h (single dose then 2.2)', 
          catDose: 'NOT RECOMMENDED - consider meloxicam', 
          doseRange: '2.2-4.4', 
          defaultDose: 2.2,
          unit: 'mg/kg', 
          frequency: 'SID', 
          route: 'PO', 
          form: 'tablet', 
          concentrations: [25, 50, 75, 100],
          notes: 'Give with food. Monitor renal/hepatic function.',
          maxDose: { dog: 4.4, cat: 0 }
        },
        meloxicam: { 
          name: 'Meloxicam', 
          category: 'NSAID', 
          dogDose: '0.2 mg/kg PO/SC day 1, then 0.1 mg/kg PO q24h', 
          catDose: '0.05 mg/kg SC single dose OR 0.025-0.05 mg/kg PO q24h (max 3 days)', 
          doseRange: '0.1-0.2', 
          defaultDose: 0.1,
          unit: 'mg/kg', 
          frequency: 'SID', 
          route: 'PO/SC', 
          form: 'liquid', 
          concentrations: [0.5, 1.5],
          notes: 'Cats: use extreme caution, max 0.1 mg/kg/day, short term only',
          maxDose: { dog: 0.2, cat: 0.1 }
        },
        
        // Analgesics
        tramadol: { 
          name: 'Tramadol', 
          category: 'Analgesic', 
          dogDose: '3-5 mg/kg PO q8-12h', 
          catDose: '2-4 mg/kg PO q8-12h (bitter taste - consider compounding)', 
          doseRange: '2-5', 
          defaultDose: 4,
          unit: 'mg/kg', 
          frequency: 'BID-TID', 
          route: 'PO', 
          form: 'tablet', 
          concentrations: [50],
          notes: 'May cause sedation. Give with food to reduce GI upset.'
        },
        gabapentin: {
          name: 'Gabapentin',
          category: 'Analgesic',
          dogDose: '10-20 mg/kg PO q8-12h (start 10)',
          catDose: '50-100 mg/cat PO q8-12h (or 5-10 mg/kg)',
          doseRange: '10-20',
          defaultDose: 10,
          unit: 'mg/kg',
          frequency: 'BID-TID',
          route: 'PO',
          form: 'capsule',
          concentrations: [100, 300, 400],
          notes: 'For neuropathic pain. Reduce dose in renal impairment.'
        },
        
        // Antibiotics
        amoxicillin: { 
          name: 'Amoxicillin', 
          category: 'Antibiotic', 
          dogDose: '11-22 mg/kg PO q8-12h', 
          catDose: '11-22 mg/kg PO q8-12h', 
          doseRange: '11-22', 
          defaultDose: 15,
          unit: 'mg/kg', 
          frequency: 'BID-TID', 
          route: 'PO', 
          form: 'liquid', 
          concentrations: [50, 100],
          notes: 'Broad spectrum. Safe in pregnancy.'
        },
        amoxicillin_clavulanate: {
          name: 'Amoxicillin-Clavulanate (Clavamox)',
          category: 'Antibiotic',
          dogDose: '12.5-25 mg/kg PO q12h',
          catDose: '62.5 mg/cat PO q12h (approx 12.5 mg/kg)',
          doseRange: '12.5-25',
          defaultDose: 12.5,
          unit: 'mg/kg',
          frequency: 'BID',
          route: 'PO',
          form: 'tablet',
          concentrations: [62.5, 125, 250, 375],
          notes: 'Covers Staph with clavulanate. Give with food if GI upset.'
        },
        cephalexin: { 
          name: 'Cephalexin', 
          category: 'Antibiotic', 
          dogDose: '15-30 mg/kg PO q8-12h', 
          catDose: '15-30 mg/kg PO q8-12h', 
          doseRange: '15-30', 
          defaultDose: 20,
          unit: 'mg/kg', 
          frequency: 'BID-TID', 
          route: 'PO', 
          form: 'tablet', 
          concentrations: [250, 500],
          notes: 'Good for skin infections. Safe in pregnancy.'
        },
        enrofloxacin: { 
          name: 'Enrofloxacin (Baytril)', 
          category: 'Antibiotic', 
          dogDose: '5-20 mg/kg PO, IM, IV q24h (UTI: 5, systemic: 10-20)', 
          catDose: '5 mg/kg PO, SC q24h - NEVER exceed 5 mg/kg (retinal toxicity)', 
          doseRange: '5-20', 
          defaultDose: 10,
          unit: 'mg/kg', 
          frequency: 'SID', 
          route: 'PO/SC/IV', 
          form: 'liquid', 
          concentrations: [50, 100, 136],
          notes: 'CAUTION: Cats max 5 mg/kg (retinal degeneration). Avoid in young animals.',
          maxDose: { dog: 20, cat: 5 },
          speciesWarning: { cat: '‚ö†Ô∏è CRITICAL: Do NOT exceed 5 mg/kg in cats - risk of blindness!' }
        },
        clindamycin: {
          name: 'Clindamycin',
          category: 'Antibiotic',
          dogDose: '5.5-11 mg/kg PO q12h OR 11-22 mg/kg PO q24h',
          catDose: '5.5-11 mg/kg PO q12h',
          doseRange: '5.5-11',
          defaultDose: 7,
          unit: 'mg/kg',
          frequency: 'BID',
          route: 'PO',
          form: 'capsule',
          concentrations: [25, 75, 150],
          notes: 'Follow with water/food to prevent esophagitis (especially cats).'
        },
        doxycycline: {
          name: 'Doxycycline',
          category: 'Antibiotic',
          dogDose: '5-10 mg/kg PO q12h',
          catDose: '5-10 mg/kg PO q12h (follow with water)',
          doseRange: '5-10',
          defaultDose: 5,
          unit: 'mg/kg',
          frequency: 'BID',
          route: 'PO',
          form: 'tablet',
          concentrations: [50, 100],
          notes: 'Give with food/water. Risk of esophageal stricture in cats.'
        },
        metronidazole: {
          name: 'Metronidazole',
          category: 'Antibiotic',
          dogDose: '10-15 mg/kg PO q12h (anaerobes, giardia)',
          catDose: '10-15 mg/kg PO q12h (neuro signs if overdose)',
          doseRange: '10-15',
          defaultDose: 12,
          unit: 'mg/kg',
          frequency: 'BID',
          route: 'PO',
          form: 'tablet',
          concentrations: [250, 500],
          notes: 'Neurotoxicity at high doses (>40 mg/kg/day). Avoid in pregnancy.'
        },
        
        // Emergency Drugs
        atropine: { 
          name: 'Atropine', 
          category: 'Emergency', 
          dogDose: '0.02-0.04 mg/kg IV (bradycardia), 0.04 mg/kg for CPR', 
          catDose: '0.02-0.04 mg/kg IV', 
          doseRange: '0.02-0.04', 
          defaultDose: 0.04,
          unit: 'mg/kg', 
          frequency: 'PRN', 
          route: 'IV/IM', 
          form: 'injectable', 
          concentrations: [0.54],
          notes: 'Minimum dose 0.01 mg/kg (bradycardia). Max 0.04 mg/kg.'
        },
        epinephrine: { 
          name: 'Epinephrine', 
          category: 'Emergency', 
          dogDose: 'CPR: 0.01-0.1 mg/kg IV (high dose 0.1-0.5 mg/kg ETT), Anaphylaxis: 0.01 mg/kg IM', 
          catDose: 'CPR: 0.01-0.1 mg/kg IV, Anaphylaxis: 0.01 mg/kg IM', 
          doseRange: '0.01-0.1', 
          defaultDose: 0.01,
          unit: 'mg/kg', 
          frequency: 'PRN', 
          route: 'IV/IM/ETT', 
          form: 'injectable', 
          concentrations: [1],
          notes: 'CPR: give every 3-5 min. Anaphylaxis: IM preferred over SC.'
        },
        diazepam: {
          name: 'Diazepam',
          category: 'Emergency',
          dogDose: 'Seizures: 0.5-2 mg/kg IV/PR (up to 3 doses)',
          catDose: 'Seizures: 0.5-1 mg/kg IV (hepatic risk)',
          doseRange: '0.5-2',
          defaultDose: 1,
          unit: 'mg/kg',
          frequency: 'PRN',
          route: 'IV/PR',
          form: 'injectable',
          concentrations: [5],
          notes: 'Give slowly IV. Propylene glycol base. Hepatic lipidosis risk in cats.'
        },
        
        // Cardiac
        furosemide: {
          name: 'Furosemide',
          category: 'Diuretic',
          dogDose: '2-4 mg/kg PO, IV q8-12h (CHF)',
          catDose: '1-2 mg/kg PO, IV q8-24h (start low)',
          doseRange: '1-4',
          defaultDose: 2,
          unit: 'mg/kg',
          frequency: 'BID-TID',
          route: 'PO/IV/IM',
          form: 'tablet',
          concentrations: [12.5, 25, 50],
          notes: 'Monitor renal values and electrolytes. Ensure water available.'
        },
        pimobendan: {
          name: 'Pimobendan (Vetmedin)',
          category: 'Cardiac',
          dogDose: '0.25-0.3 mg/kg PO q12h (empty stomach)',
          catDose: '0.25-0.3 mg/kg PO q12h (off-label)',
          doseRange: '0.25-0.3',
          defaultDose: 0.25,
          unit: 'mg/kg',
          frequency: 'BID',
          route: 'PO',
          form: 'tablet',
          concentrations: [1.25, 2.5, 5, 10],
          notes: 'Give on empty stomach 1hr before food. Inodilator for CHF.'
        },
        benazepril: {
          name: 'Benazepril (Fortekor)',
          category: 'Cardiac',
          dogDose: '0.25-0.5 mg/kg PO q24h',
          catDose: '0.25-0.5 mg/kg PO q24h',
          doseRange: '0.25-0.5',
          defaultDose: 0.25,
          unit: 'mg/kg',
          frequency: 'SID',
          route: 'PO',
          form: 'tablet',
          concentrations: [2.5, 5],
          notes: 'ACE inhibitor for CHF/CKD. Monitor renal values and potassium.'
        },
        
        // Steroids
        prednisone: {
          name: 'Prednisone/Prednisolone',
          category: 'Steroid',
          dogDose: 'Anti-inflammatory: 0.5-1 mg/kg PO q12h; Immunosuppressive: 2-4 mg/kg PO q24h',
          catDose: '1-2 mg/kg PO q12h (use prednisolone in cats)',
          doseRange: '0.5-2',
          defaultDose: 1,
          unit: 'mg/kg',
          frequency: 'BID-SID',
          route: 'PO',
          form: 'tablet',
          concentrations: [5, 10, 20],
          notes: 'Taper when discontinuing. Cats need prednisolone (poor hepatic conversion).'
        },
        dexamethasone: {
          name: 'Dexamethasone',
          category: 'Steroid',
          dogDose: '0.1-0.2 mg/kg IV/IM (anti-inflammatory); 2-4 mg/kg IV (shock)',
          catDose: '0.1-0.2 mg/kg IV/IM',
          doseRange: '0.1-0.2',
          defaultDose: 0.15,
          unit: 'mg/kg',
          frequency: 'SID',
          route: 'IV/IM',
          form: 'injectable',
          concentrations: [2, 4],
          notes: 'Shock dose much higher. Long-acting, no mineralocorticoid effect.'
        }
      };

      // DOM Elements
      const els = {
        modeBtns: document.querySelectorAll('.calc-mode-btn'),
        speciesBtns: document.querySelectorAll('.calc-species-btn'),
        weightInput: document.getElementById('weight'),
        weightPresets: document.querySelectorAll('#weight-presets .calc-chip'),
        drugSelect: document.getElementById('drug-select'),
        formBtns: document.querySelectorAll('#form-selector .calc-chip'),
        concentration: document.getElementById('concentration'),
        concentrationHint: document.getElementById('concentration-hint'),
        advancedOptions: document.getElementById('advanced-options'),
        doseRate: document.getElementById('dose-rate'),
        frequency: document.getElementById('frequency'),
        maxDose: document.getElementById('max-dose'),
        calculateBtn: document.getElementById('calculate-btn'),
        results: document.getElementById('results'),
        resultQuantity: document.getElementById('result-quantity'),
        resultQuantityUnit: document.getElementById('result-quantity-unit'),
        resultMg: document.getElementById('result-mg'),
        resultMgUnit: document.getElementById('result-mg-unit'),
        resultDaily: document.getElementById('result-daily'),
        dailyResult: document.getElementById('daily-result'),
        warningMessage: document.getElementById('warning-message'),
        calcDetails: document.querySelector('.calc-details'),
        calculationDetails: document.getElementById('calculation-details'),
        copyBtn: document.getElementById('copy-btn'),
        resetBtn: document.getElementById('reset-btn')
      };

      let currentMode = 'basic';
      let currentSpecies = 'dog';
      let currentForm = 'tablet';

      // Mode switching
      els.modeBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          currentMode = btn.dataset.mode;
          els.modeBtns.forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          
          document.getElementById('mode-icon').textContent = currentMode === 'basic' ? '‚ö°' : 'üî¨';
          document.getElementById('mode-title').textContent = currentMode === 'basic' ? 'Quick Dose Calculation' : 'Advanced Dose Calculation';
          document.getElementById('mode-subtitle').textContent = currentMode === 'basic' ? 'Enter weight and drug details for instant results' : 'Full control over dosing parameters';
          
          els.advancedOptions.style.display = currentMode === 'advanced' ? 'block' : 'none';
          els.dailyResult.style.display = currentMode === 'advanced' ? 'block' : 'none';
          
          if (els.results.style.display === 'block') calculate();
        });
      });

      // Species selection
      els.speciesBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          currentSpecies = btn.dataset.species;
          els.speciesBtns.forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          updateWeightPresets();
        });
      });

      function updateWeightPresets() {
        const presets = {
          dog: [['2.5', 'Toy'], ['10', 'Small'], ['25', 'Medium'], ['35', 'Large']],
          cat: [['1', 'Kitten'], ['2.5', 'Small'], ['4', 'Average'], ['6', 'Large']],
          exotic: [['0.1', 'Bird'], ['1', 'Ferret'], ['2', 'Rabbit']]
        };
        
        const presetContainer = document.getElementById('weight-presets');
        presetContainer.innerHTML = presets[currentSpecies].map(([w, l]) => 
          `<button type="button" class="calc-chip" data-weight="${w}">${w} kg (${l})</button>`
        ).join('');
        
        presetContainer.querySelectorAll('.calc-chip').forEach(chip => {
          chip.addEventListener('click', () => {
            els.weightInput.value = chip.dataset.weight;
          });
        });
      }

      // Weight presets
      els.weightPresets.forEach(chip => {
        chip.addEventListener('click', () => {
          els.weightInput.value = chip.dataset.weight;
        });
      });

      // Form selection
      els.formBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          currentForm = btn.dataset.form;
          els.formBtns.forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          
          const hints = {
            tablet: 'mg/tablet',
            liquid: 'mg/mL',
            injectable: 'mg/mL'
          };
          els.concentrationHint.textContent = hints[currentForm];
          
          const units = {
            tablet: 'tablet(s)',
            liquid: 'mL',
            injectable: 'mL'
          };
          els.resultQuantityUnit.textContent = units[currentForm];
        });
      });

      // Drug selection
      els.drugSelect.addEventListener('change', () => {
        const option = els.drugSelect.selectedOptions[0];
        const drugKey = els.drugSelect.value;
        const drug = DRUGS[drugKey];
        
        // Clear previous warnings
        const warningDiv = document.getElementById('drug-warning');
        warningDiv.style.display = 'none';
        warningDiv.textContent = '';
        
        if (option && option.dataset.concentration) {
          els.concentration.value = option.dataset.concentration;
          
          if (drug) {
            // Set dose rate based on default or calculated from range
            let doseToUse = drug.defaultDose;
            if (!doseToUse && drug.doseRange) {
              const [min, max] = drug.doseRange.split('-').map(parseFloat);
              doseToUse = (min + max) / 2;
            }
            
            // Always update dose rate if we have one
            if (doseToUse) {
              els.doseRate.value = doseToUse;
            }
            
            // Show species-specific warning if applicable
            if (drug.speciesWarning && drug.speciesWarning[currentSpecies]) {
              warningDiv.textContent = drug.speciesWarning[currentSpecies];
              warningDiv.style.display = 'block';
            }
            
            // Show notes if in advanced mode
            if (currentMode === 'advanced' && drug.notes) {
              warningDiv.textContent = (warningDiv.textContent ? warningDiv.textContent + ' ' : '') + '‚ÑπÔ∏è ' + drug.notes;
              warningDiv.style.display = 'block';
            }
          }
        }
      });

      // Unit converters
      document.querySelectorAll('.calc-unit-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
          const wrapper = e.target.closest('.calc-input-wrapper');
          const input = wrapper.querySelector('input');
          const currentUnit = wrapper.querySelector('.calc-unit-btn.active').dataset.unit;
          const newUnit = e.target.dataset.unit;
          
          wrapper.querySelectorAll('.calc-unit-btn').forEach(b => b.classList.remove('active'));
          e.target.classList.add('active');
          
          if (input.value) {
            const val = parseFloat(input.value);
            const conversions = {
              weight: { kg: { kg: 1, lb: 2.20462, g: 1000 }, lb: { kg: 0.453592, lb: 1, g: 453.592 }, g: { kg: 0.001, lb: 0.00220462, g: 1 } },
              mass: { mg: { mg: 1, g: 0.001 }, g: { mg: 1000, g: 1 } }
            };
            
            const conversionType = input.dataset.conversion || 'weight';
            if (conversions[conversionType] && conversions[conversionType][currentUnit]) {
              input.value = (val * conversions[conversionType][currentUnit][newUnit]).toFixed(3);
            }
          }
        });
      });

      // Calculate
      function calculate() {
        const weight = parseFloat(els.weightInput.value);
        const concentration = parseFloat(els.concentration.value);
        const drugKey = els.drugSelect.value;
        const drug = drugKey ? DRUGS[drugKey] : null;
        
        if (!weight || !concentration || weight <= 0 || concentration <= 0) {
          alert('Please enter valid weight and concentration values.');
          return;
        }
        
        // Get dose rate - prioritize user input, then drug database
        let doseRate = parseFloat(els.doseRate.value);
        if (!doseRate && drug) {
          doseRate = drug.defaultDose;
          if (!doseRate && drug.doseRange) {
            const [min, max] = drug.doseRange.split('-').map(parseFloat);
            doseRate = (min + max) / 2;
          }
        }
        if (!doseRate) doseRate = 1; // Fallback
        
        // Calculate doses
        const mgDose = weight * doseRate;
        const quantity = mgDose / concentration;
        
        // Build warnings array
        let warnings = [];
        
        // Check user-defined max dose
        if (els.maxDose.value) {
          const maxDose = parseFloat(els.maxDose.value);
          if (mgDose > maxDose) {
            warnings.push(`‚ö†Ô∏è Dose exceeds your set maximum limit (${maxDose}mg). Consider reducing.`);
          }
        }
        
        // Check drug-specific max dose for species
        if (drug && drug.maxDose) {
          const maxForSpecies = drug.maxDose[currentSpecies];
          if (maxForSpecies && doseRate > maxForSpecies) {
            warnings.push(`üö® CRITICAL: Exceeds safe dose for ${currentSpecies}s (${maxForSpecies} mg/kg max). ${drug.name} max dose exceeded!`);
          }
        }
        
        // Check species-specific warnings
        if (drug && drug.speciesWarning && drug.speciesWarning[currentSpecies]) {
          warnings.push(drug.speciesWarning[currentSpecies]);
        }
        
        // Check if drug is contraindicated for species
        if (drug && drug.catDose && drug.catDose.includes('NOT RECOMMENDED') && currentSpecies === 'cat') {
          warnings.push(`üö® ${drug.name} is NOT recommended for cats! Consider alternatives.`);
        }
        
        // Display results with appropriate precision
        els.resultQuantity.textContent = quantity < 0.01 ? quantity.toExponential(2) : (quantity < 1 ? quantity.toFixed(3) : quantity.toFixed(2));
        els.resultMg.textContent = mgDose < 0.01 ? mgDose.toExponential(2) : mgDose.toFixed(2);
        
        if (currentMode === 'advanced') {
          const freq = parseInt(els.frequency.value) || 1;
          els.resultDaily.textContent = (mgDose * freq).toFixed(1);
        }
        
        // Display warnings
        if (warnings.length > 0) {
          els.warningMessage.style.display = 'block';
          els.warningMessage.innerHTML = warnings.join('<br>');
          els.warningMessage.style.background = warnings.some(w => w.includes('CRITICAL')) ? 'rgba(239, 68, 68, 0.15)' : 'rgba(245, 158, 11, 0.15)';
          els.warningMessage.style.borderLeft = warnings.some(w => w.includes('CRITICAL')) ? '3px solid #ef4444' : '3px solid #f59e0b';
        } else {
          els.warningMessage.style.display = 'none';
        }
        
        // Build calculation details
        const details = [
          { label: 'Patient Weight', value: `${weight} kg` },
          { label: 'Dose Rate Used', value: `${doseRate} mg/kg` }
        ];
        
        if (drug) {
          details.push({ label: 'Drug Reference', value: drug.doseRange + ' mg/kg' });
          if (drug.dogDose && currentSpecies === 'dog') {
            details.push({ label: 'Dog Dosing', value: drug.dogDose });
          } else if (drug.catDose && currentSpecies === 'cat') {
            details.push({ label: 'Cat Dosing', value: drug.catDose });
          }
        }
        
        details.push(
          { label: 'Calculation', value: `${weight} kg √ó ${doseRate} mg/kg = ${mgDose.toFixed(2)} mg` },
          { label: 'Concentration', value: `${concentration} mg/${currentForm === 'tablet' ? 'tab' : 'mL'}` },
          { label: 'Quantity', value: `${mgDose.toFixed(2)} mg √∑ ${concentration} mg = ${els.resultQuantity.textContent} ${els.resultQuantityUnit.textContent}` }
        );
        
        if (drug && drug.notes) {
          details.push({ label: 'Important Notes', value: drug.notes });
        }
        
        els.calculationDetails.innerHTML = details.map(d => `
          <div class="calc-info-item">
            <span class="calc-info-item__label">${d.label}</span>
            <span class="calc-info-item__value">${d.value}</span>
          </div>
        `).join('');
        
        els.results.style.display = 'block';
        
        // Scroll to results
        els.results.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
      }

      els.calculateBtn.addEventListener('click', calculate);

      // Copy results
      els.copyBtn.addEventListener('click', () => {
        const text = `Dose: ${els.resultQuantity.textContent} ${els.resultQuantityUnit.textContent} (${els.resultMg.textContent} mg)`;
        navigator.clipboard.writeText(text).then(() => {
          els.copyBtn.innerHTML = '‚úì Copied!';
          setTimeout(() => {
            els.copyBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg> Copy`;
          }, 2000);
        });
      });

      // Reset
      els.resetBtn.addEventListener('click', () => {
        els.weightInput.value = '';
        els.drugSelect.value = '';
        els.concentration.value = '';
        els.doseRate.value = '';
        els.maxDose.value = '';
        els.results.style.display = 'none';
        els.warningMessage.style.display = 'none';
      });

      // Expandable details
      els.calcDetails.querySelector('.calc-details__trigger').addEventListener('click', () => {
        els.calcDetails.classList.toggle('open');
      });

      // Initialize
      updateWeightPresets();
    })();
    </script>
  </body>
</html>
