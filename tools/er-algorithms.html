<!doctype html>
<html lang="en" data-mode="pro" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author-status" content="NAVLE-candidate-unlicensed" />
    <meta name="referrer" content="strict-origin-when-cross-origin" />
    <link rel="icon" type="image/svg+xml" href="/assets/img/vet-favicon.svg" />
    <title>Veterinary ER Algorithms Library â€“ VetLudics</title>
    <meta
      name="description"
      content="Review one-minute veterinary ER algorithms for GDV, DKA, anaphylaxis, shock, CHF, hyperkalemia, urethral obstruction, heatstroke, and sepsis."
    />
    <meta property="og:type" content="website" />
    <meta
      property="og:title"
      content="Veterinary ER Algorithms Library â€“ VetLudics"
    />
    <meta
      property="og:description"
      content="Rapid first-step emergency algorithms for veterinary triage training."
    />
    <meta
      property="og:url"
      content="https://parthchaudhari.com/tools/er-algorithms.html"
    />
    <link rel="canonical" href="https://parthchaudhari.com/tools/er-algorithms.html" />
    <link rel="stylesheet" href="/assets/css/tokens.css" />
    <link rel="stylesheet" href="/assets/css/portal.css" />
    <link rel="stylesheet" href="/assets/css/calculator-dashboard.css" />
    <script src="/assets/js/theme-toggle.js" defer></script>
    <script src="/assets/js/nav-status.js" defer></script>
    <script src="/assets/js/legal-compliance.js" defer></script>
  </head>
  <body class="pc-page pc-page--study no-js">
    <div class="pc-toast-container" role="status" aria-live="polite" aria-atomic="true"></div>
    
    <a class="pc-skip-link" href="#pc-main">Skip to main content</a>
    
    <nav class="pc-portal-nav" aria-label="Global portal navigation">
      <div class="pc-portal-nav__inner">
        <a class="pc-logo" href="/">
          <span class="pc-logo__icon">ğŸ¾</span>
          <span class="pc-logo__text">VetLudics</span>
        </a>
        <div class="pc-nav-group">
          <a class="pc-nav-link pc-nav-link--hide-mobile" href="/play/">Play</a>
          <a class="pc-nav-link pc-nav-link--hide-mobile" href="/bridge/">Bridge</a>
          <a class="pc-nav-link" href="/search.html">Search</a>
          <a class="pc-nav-link pc-nav-link--hide-mobile" href="/study/">Study</a>
          <a class="pc-nav-link" href="/account/">
            <span class="pc-auth-indicator" data-pc-auth-indicator aria-hidden="true">â—‹</span>
            <span class="pc-nav-link__text">Account</span>
          </a>
          <button type="button" class="pc-nav-toggle pc-theme-toggle" data-pc-theme-toggle aria-label="Toggle theme">
            <span class="pc-theme-icon pc-theme-icon--sun" aria-hidden="true">â˜€ï¸</span>
            <span class="pc-theme-icon pc-theme-icon--moon" aria-hidden="true">ğŸŒ™</span>
          </button>
        </div>
      </div>
    </nav>

    <main id="pc-main" class="pc-calc-dashboard" role="main">
      <!-- Header -->
      <header class="pc-calc-header pc-calc-animate">
        <div class="pc-calc-header__title">
          <div class="pc-calc-header__icon">ğŸš¨</div>
          <div class="pc-calc-header__text">
            <h1>ER Algorithms Library</h1>
            <p>One-minute rapid response frameworks</p>
          </div>
        </div>
        <div class="pc-calc-header__actions">
          <div class="pc-calc-quick-actions">
            <button type="button" class="pc-calc-action-btn" onclick="printAlgorithm()" title="Print current algorithm">
              <span>ğŸ–¨ï¸</span> Print
            </button>
            <button type="button" class="pc-calc-action-btn" onclick="copyAlgorithmSteps()" title="Copy algorithm steps">
              <span>ğŸ“‹</span> Copy
            </button>
            <a href="/tools/" class="pc-calc-action-btn">
              <span>â†</span> Back
            </a>
          </div>
        </div>
      </header>

      <!-- Input Panel (Algorithm Selection) -->
      <aside class="pc-calc-inputs pc-calc-animate pc-calc-animate--1" aria-label="Algorithm selection">
        <div class="pc-calc-panel">
          <div class="pc-calc-panel__header">
            <span class="pc-calc-panel__title">
              <span class="pc-calc-panel__icon">ğŸ“‹</span>
              Select Algorithm
            </span>
          </div>
          <div class="pc-calc-panel__content">
            <!-- Category Quick Select -->
            <div class="pc-calc-field">
              <div class="pc-calc-field__label">
                <span>Category</span>
              </div>
              <div class="pc-calc-chips" style="margin-top: 0;">
                <button type="button" class="pc-calc-chip pc-calc-chip--active" onclick="filterCategory('all', this)">All</button>
                <button type="button" class="pc-calc-chip" onclick="filterCategory('cardio', this)">Cardio</button>
                <button type="button" class="pc-calc-chip" onclick="filterCategory('toxic', this)">Toxic</button>
                <button type="button" class="pc-calc-chip" onclick="filterCategory('metabolic', this)">Metabolic</button>
                <button type="button" class="pc-calc-chip" onclick="filterCategory('neuro', this)">Neuro</button>
              </div>
            </div>

            <!-- Algorithm List -->
            <div class="pc-calc-field" style="margin-top: 1rem;">
              <div class="pc-calc-field__label">
                <span>Critical Scenario</span>
              </div>
              <select id="algorithm-select" class="pc-calc-input" onchange="onAlgorithmChange()" size="8" style="min-height: 280px;">
                <option value="gdv" data-category="gi emergency" selected>ğŸ« GDV (Gastric Dilatation-Volvulus)</option>
                <option value="dka" data-category="metabolic">ğŸ©¸ DKA (Diabetic Ketoacidosis)</option>
                <option value="seizure" data-category="neuro">âš¡ Status Epilepticus</option>
                <option value="anaphylaxis" data-category="allergy">ğŸ¤§ Anaphylaxis</option>
                <option value="shock" data-category="cardio">ğŸ’” Undifferentiated Shock</option>
                <option value="chf" data-category="cardio">ğŸ«€ CHF Decompensation</option>
                <option value="hyperkalemia" data-category="metabolic">âš¡ Hyperkalemia</option>
                <option value="uo" data-category="urinary">ğŸš« Urethral Obstruction (Cat)</option>
                <option value="heatstroke" data-category="emergency">ğŸŒ¡ï¸ Heatstroke</option>
                <option value="sepsis" data-category="infection">ğŸ¦  Sepsis / SIRS</option>
              </select>
            </div>

            <!-- Quick Navigation -->
            <div class="pc-calc-field">
              <div style="font-size: 0.75rem; color: var(--calc-text-muted); margin-bottom: 0.5rem;">
                Quick Navigation
              </div>
              <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.5rem;">
                <button type="button" class="pc-calc-related__item" onclick="selectAlgorithm('gdv')" style="padding: 0.5rem;">
                  <span>ğŸ«</span> GDV
                </button>
                <button type="button" class="pc-calc-related__item" onclick="selectAlgorithm('dka')" style="padding: 0.5rem;">
                  <span>ğŸ©¸</span> DKA
                </button>
                <button type="button" class="pc-calc-related__item" onclick="selectAlgorithm('shock')" style="padding: 0.5rem;">
                  <span>ğŸ’”</span> Shock
                </button>
                <button type="button" class="pc-calc-related__item" onclick="selectAlgorithm('chf')" style="padding: 0.5rem;">
                  <span>ğŸ«€</span> CHF
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Related Tools -->
        <div class="pc-calc-panel pc-calc-animate pc-calc-animate--2">
          <div class="pc-calc-related">
            <div class="pc-calc-related__title">Related Tools</div>
            <div class="pc-calc-related__grid">
              <a href="/tools/dose-calculator.html" class="pc-calc-related__item">
                <span class="pc-calc-related__icon">ğŸ’Š</span>
                <span>Dosing</span>
              </a>
              <a href="/tools/fluid-calculator.html" class="pc-calc-related__item">
                <span class="pc-calc-related__icon">ğŸ’§</span>
                <span>Fluids</span>
              </a>
              <a href="/emergency-triage-algorithms/" class="pc-calc-related__item">
                <span class="pc-calc-related__icon">ğŸ“š</span>
                <span>Full Hub</span>
              </a>
              <a href="/tools/cri-calculator.html" class="pc-calc-related__item">
                <span class="pc-calc-related__icon">ğŸ’‰</span>
                <span>CRI Calc</span>
              </a>
            </div>
          </div>
        </div>
      </aside>

      <!-- Main Content (Algorithm Flowchart) -->
      <section class="pc-calc-main pc-calc-animate pc-calc-animate--2" aria-label="Algorithm steps">
        <div class="pc-calc-viz" id="algorithm-viz">
          <div class="pc-calc-viz__header">
            <span class="pc-calc-viz__title" id="viz-title">GDV Emergency Protocol</span>
            <span style="font-size: 0.75rem; color: var(--calc-text-muted);">
              <span id="viz-category">GI Emergency</span>
            </span>
          </div>

          <!-- Algorithm Steps Flowchart -->
          <div id="algorithm-steps" style="display: flex; flex-direction: column; gap: 0.75rem; margin-bottom: 1rem;">
            <!-- Steps will be dynamically populated -->
          </div>

          <!-- Key Assessment Points -->
          <div class="pc-calc-drug-info" style="margin-bottom: 1rem;">
            <div style="font-size: 0.75rem; font-weight: 600; color: var(--calc-text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.75rem;">
              ğŸ” Key Assessment Points
            </div>
            <div class="pc-calc-drug-info__grid" id="assessment-points">
              <!-- Assessment points will be dynamically populated -->
            </div>
          </div>

          <!-- Red Flags -->
          <div id="red-flags" class="pc-calc-alert pc-calc-alert--error" style="display: none;">
            <div class="pc-calc-alert__icon">ğŸš©</div>
            <div class="pc-calc-alert__content">
              <div class="pc-calc-alert__title">Red Flags - Immediate Action</div>
              <div class="pc-calc-alert__text" id="red-flags-text"></div>
            </div>
          </div>

          <!-- Quick Tips -->
          <div style="margin-top: auto; padding-top: 1rem; border-top: 1px solid var(--calc-glass-border);">
            <div style="font-size: 0.75rem; font-weight: 600; color: var(--calc-text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.75rem;">
              ğŸ’¡ Clinical Pearls
            </div>
            <ul id="clinical-pearls" style="font-size: 0.8125rem; color: var(--calc-text-muted); line-height: 1.8; margin: 0; padding-left: 1.25rem;">
              <!-- Pearls will be dynamically populated -->
            </ul>
          </div>
        </div>
      </section>

      <!-- Results Panel (Drug Reference & Checkpoints) -->
      <aside class="pc-calc-results pc-calc-animate pc-calc-animate--3" aria-label="Quick reference and checkpoints">
        <div class="pc-calc-panel">
          <div class="pc-calc-panel__header">
            <span class="pc-calc-panel__title">
              <span class="pc-calc-panel__icon">â±ï¸</span>
              First 60 Seconds
            </span>
            <button type="button" class="pc-calc-copy" onclick="copyAlgorithmSteps()" title="Copy steps">
              ğŸ“‹
            </button>
          </div>
          <div class="pc-calc-panel__content">
            <!-- Primary Action -->
            <div class="pc-calc-result-card pc-calc-result-card--primary" id="primary-action">
              <div class="pc-calc-result__label">
                <span>ğŸ¯</span> Immediate Priority
              </div>
              <div class="pc-calc-result__value" id="priority-action" style="font-size: 1.25rem;">
                Oxygen + IV Access Ã—2
              </div>
              <div class="pc-calc-result__context" id="priority-context">Critical first steps</div>
            </div>

            <!-- Drug Reference -->
            <div style="margin-bottom: 1rem;">
              <div style="font-size: 0.75rem; font-weight: 600; color: var(--calc-text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.75rem;">
                ğŸ’Š Quick Drug Reference
              </div>
              <div id="drug-reference" style="display: flex; flex-direction: column; gap: 0.5rem;">
                <!-- Drug cards will be dynamically populated -->
              </div>
            </div>

            <!-- Checkpoints -->
            <div class="pc-calc-result-card pc-calc-result-card--success">
              <div class="pc-calc-result__label">
                <span>âœ“</span> Key Checkpoints
              </div>
              <div id="checkpoints" style="font-size: 0.8125rem; color: var(--calc-text); line-height: 1.6;">
                <!-- Checkpoints will be dynamically populated -->
              </div>
            </div>
          </div>
        </div>

        <!-- Emergency Contacts / Next Steps -->
        <div class="pc-calc-panel pc-calc-animate pc-calc-animate--4">
          <div class="pc-calc-panel__content" style="padding: 1rem;">
            <div style="font-size: 0.75rem; font-weight: 600; color: var(--calc-text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.75rem;">
              ğŸ“‹ Next Steps
            </div>
            <div id="next-steps" style="font-size: 0.8125rem; color: var(--calc-text); line-height: 1.6;">
              <!-- Next steps will be dynamically populated -->
            </div>
          </div>
        </div>

        <!-- Disclaimer -->
        <div style="padding: 0.75rem; font-size: 0.6875rem; color: var(--calc-text-muted); text-align: center; line-height: 1.5;">
          Educational rapid recall only. Does not replace full critical care protocols. Always verify with current formularies.
        </div>
      </aside>
    </main>

    <footer class="pc-footer pc-footer--enhanced pc-footer--minimal" style="margin-top: 0;">
      <div class="pc-footer__bottom">
        <div class="pc-footer__legal">
          <a href="/">Home</a>
          <a href="/tools/">Tools</a>
          <a href="/reference/">References</a>
          <a href="/privacy/">Privacy</a>
        </div>
        <p class="pc-footer__copyright">Â© 2025 VetLudics. Not a substitute for professional veterinary advice.</p>
      </div>
    </footer>

    <script>
      // Algorithm Data
      const algorithmData = {
        gdv: {
          name: 'GDV (Gastric Dilatation-Volvulus)',
          category: 'GI Emergency',
          steps: [
            { step: 1, text: 'Oxygen supplementation', highlight: true },
            { step: 2, text: 'IV access Ã— 2 (large bore)', highlight: true },
            { step: 3, text: 'Shock bolus aliquots', highlight: true },
            { step: 4, text: 'Decompress stomach (orogastric tube or trocar)', highlight: true },
            { step: 5, text: 'Lactate, ECG monitoring', highlight: false },
            { step: 6, text: 'Stabilization & surgical prep', highlight: false },
            { step: 7, text: 'Surgery + gastropexy', highlight: false }
          ],
          assessment: [
            { label: 'HR', value: 'â†‘ Tachycardia' },
            { label: 'MM', value: 'Pale/Injected' },
            { label: 'Abdomen', value: 'Distended, tympanic' },
            { label: 'Mentation', value: 'Anxious/Depressed' }
          ],
          redFlags: ['Gastric necrosis', 'Splenic torsion', 'Cardiac arrhythmias', 'Severe acidosis'],
          pearls: [
            'Do not delay decompression for diagnostics',
            'LRS or Normosol-R preferred over 0.9% NaCl',
            'Ventricular arrhythmias common post-decompression',
            'Broad-spectrum antibiotics before surgery'
          ],
          priority: 'Oxygen + IV Access Ã—2',
          priorityContext: 'Start shock therapy immediately',
          drugs: [
            { name: 'Shock dose fluids', dose: '90 mL/kg (dogs)', route: 'IV', note: 'Give 1/4 aliquots, reassess' },
            { name: 'Lidocaine', dose: '2 mg/kg', route: 'IV', note: 'If ventricular arrhythmia' },
            { name: 'Opioids', dose: 'As needed', route: 'IV/IM', note: 'Avoid full Î±-2 agonists' }
          ],
          checkpoints: [
            'âœ“ Two patent IV catheters placed',
            'âœ“ Abdominal decompression achieved',
            'âœ“ Perfusion parameters improving'
          ],
          nextSteps: 'Surgery as soon as stable. Obtain baseline lactate, PCV/TS, ECG. Broad-spectrum antibiotics (ampicillin + enrofloxacin or similar).'
        },
        dka: {
          name: 'DKA (Diabetic Ketoacidosis)',
          category: 'Metabolic Emergency',
          steps: [
            { step: 1, text: 'Restore perfusion with isotonic fluids', highlight: true },
            { step: 2, text: 'Evaluate K+ before insulin', highlight: true },
            { step: 3, text: 'Address hypokalemia if present', highlight: true },
            { step: 4, text: 'Begin CRI insulin', highlight: false },
            { step: 5, text: 'Serial electrolytes q2-4h', highlight: false },
            { step: 6, text: 'Glucose trending (goal: 150-250 mg/dL)', highlight: false },
            { step: 7, text: 'Trigger search for underlying cause', highlight: false }
          ],
          assessment: [
            { label: 'Glucose', value: '>250 mg/dL' },
            { label: 'K+', value: 'Variable (high/low)' },
            { label: 'pH', value: '<7.3 (often <7.1)' },
            { label: 'Ketones', value: 'Positive serum/urine' }
          ],
          redFlags: ['Severe hypokalemia', 'Cerebral edema signs', 'Severe acidosis (pH <7.0)', 'Coma'],
          pearls: [
            'Never start insulin without checking K+',
            'Aggressive K+ supplementation often needed',
            'Add dextrose when glucose <250 mg/dL',
            'Look for underlying UTI, pancreatitis'
          ],
          priority: 'Isotonic Fluids + Check K+',
          priorityContext: 'Correct perfusion first',
          drugs: [
            { name: 'Regular Insulin', dose: '0.05-0.1 U/kg/hr', route: 'CRI', note: 'Start after K+ check' },
            { name: 'KCl', dose: 'Add to fluids', route: 'IV', note: 'Max 0.5 mEq/kg/hr' },
            { name: 'Dextrose 50%', dose: 'Add to fluids', route: 'IV', note: 'When BG <250' }
          ],
          checkpoints: [
            'âœ“ Potassium measured before insulin',
            'âœ“ Fluid resuscitation initiated',
            'âœ“ Electrolyte monitoring q2-4h'
          ],
          nextSteps: 'Monitor glucose hourly initially. Add dextrose when BG <250 mg/dL but continue insulin until ketosis resolves. Search for underlying cause.'
        },
        seizure: {
          name: 'Status Epilepticus',
          category: 'Neurological Emergency',
          steps: [
            { step: 1, text: 'Diazepam or midazolam IV', highlight: true },
            { step: 2, text: 'Airway protection + oxygen', highlight: true },
            { step: 3, text: 'Check glucose immediately', highlight: true },
            { step: 4, text: 'Levetiracetam or phenobarbital load', highlight: false },
            { step: 5, text: 'Temperature control (cooling)', highlight: false },
            { step: 6, text: 'Propofol CRI if refractory', highlight: false },
            { step: 7, text: 'Cause workup (toxins, metabolic)', highlight: false }
          ],
          assessment: [
            { label: 'Mentation', value: 'Seizing/Post-ictal' },
            { label: 'Temp', value: 'Often hyperthermic' },
            { label: 'Glucose', value: 'Check immediately' },
            { label: 'Pattern', value: 'Continuous/cluster' }
          ],
          redFlags: ['Status >5 min', 'Multiple seizures', 'No recovery between', 'Hyperthermia >41Â°C'],
          pearls: [
            'Benzos first line - give to effect',
            'Rectal diazepam if no IV access',
            'Hypoglycemia can cause seizures',
            'Cooling measures to prevent brain damage'
          ],
          priority: 'Benzodiazepine + Airway',
          priorityContext: 'Stop seizure activity',
          drugs: [
            { name: 'Diazepam', dose: '0.5-1 mg/kg', route: 'IV', note: 'Repeat to effect' },
            { name: 'Midazolam', dose: '0.3 mg/kg', route: 'IV/IM', note: 'Alternative to diazepam' },
            { name: 'Levetiracetam', dose: '20-60 mg/kg', route: 'IV', note: 'Load over 15 min' },
            { name: 'Phenobarbital', dose: '2-4 mg/kg', route: 'IV', note: 'Repeat to effect' }
          ],
          checkpoints: [
            'âœ“ Seizure activity stopped',
            'âœ“ Airway patent, oxygen provided',
            'âœ“ Glucose checked'
          ],
          nextSteps: 'Monitor for recurrence. Load maintenance anticonvulsant. Workup for underlying cause (CBC, chem, bile acids, toxin screen, imaging if indicated).'
        },
        anaphylaxis: {
          name: 'Anaphylaxis',
          category: 'Allergic Emergency',
          steps: [
            { step: 1, text: 'IM epinephrine immediately', highlight: true },
            { step: 2, text: 'Oxygen supplementation', highlight: true },
            { step: 3, text: 'IV access + fluid bolus', highlight: true },
            { step: 4, text: 'Antihistamine (adjunct)', highlight: false },
            { step: 5, text: 'Steroids (adjunct)', highlight: false },
            { step: 6, text: 'BP monitoring', highlight: false },
            { step: 7, text: 'Repeat epi if needed', highlight: false }
          ],
          assessment: [
            { label: 'Airway', value: 'Edema possible' },
            { label: 'Skin', value: 'Hives/Angioedema' },
            { step: 'HR', value: 'Variable' },
            { label: 'BP', value: 'Hypotension common' }
          ],
          redFlags: ['Airway obstruction', 'Severe hypotension', 'Collapse', 'Bronchospasm'],
          pearls: [
            'IM epinephrine is life-saving',
            'IV epi only if cardiac arrest',
            'IV fluids for distributive shock',
            'Antihistamines are adjunct only'
          ],
          priority: 'IM Epinephrine NOW',
          priorityContext: 'Do not delay for IV access',
          drugs: [
            { name: 'Epinephrine', dose: '0.01 mg/kg IM', route: 'IM', note: 'Repeat q5-15min' },
            { name: 'Crystalloids', dose: 'Shock dose', route: 'IV', note: 'For hypotension' },
            { name: 'Diphenhydramine', dose: '1-2 mg/kg', route: 'IM/IV', note: 'Adjunct therapy' },
            { name: 'Dexamethasone', dose: '0.1-0.2 mg/kg', route: 'IV', note: 'Adjunct therapy' }
          ],
          checkpoints: [
            'âœ“ Epinephrine administered',
            'âœ“ Airway patent',
            'âœ“ BP responding to fluids'
          ],
          nextSteps: 'Monitor for biphasic reaction (4-8 hours). Identify trigger. Owner education on future anaphylaxis recognition and IM epi administration.'
        },
        shock: {
          name: 'Undifferentiated Shock',
          category: 'Cardiovascular Emergency',
          steps: [
            { step: 1, text: 'Perfusion exam (MM, CRT, pulses)', highlight: true },
            { step: 2, text: 'POCUS if available (FAST)', highlight: true },
            { step: 3, text: 'Balanced bolus aliquots', highlight: true },
            { step: 4, text: 'Reassess mentation', highlight: false },
            { step: 5, text: 'Reassess pulse quality', highlight: false },
            { step: 6, text: 'Lactate trending', highlight: false },
            { step: 7, text: 'Urine output monitoring', highlight: false }
          ],
          assessment: [
            { label: 'MM', value: 'Pale/Grey/Cyanotic' },
            { label: 'CRT', value: '>2 seconds' },
            { label: 'HR', value: 'Tachycardia (variable)' },
            { label: 'BP', value: 'Hypotension' }
          ],
          redFlags: ['Severe hypotension', 'Altered mentation', 'Weak/absent pulses', 'Hypothermia'],
          pearls: [
            'Dogs: 10-20 mL/kg bolus aliquots',
            'Cats: 5-10 mL/kg bolus aliquots',
            'Reassess after every bolus',
            'Consider type: hypovolemic, septic, cardiogenic'
          ],
          priority: 'Perfusion Exam + Fluids',
          priorityContext: 'Identify shock type',
          drugs: [
            { name: 'Crystalloids', dose: '10-20 mL/kg', route: 'IV', note: 'Dogs - reassess' },
            { name: 'Crystalloids', dose: '5-10 mL/kg', route: 'IV', note: 'Cats - reassess' },
            { name: 'Hetastarch', dose: '5 mL/kg', route: 'IV', note: 'If colloids indicated' }
          ],
          checkpoints: [
            'âœ“ Perfusion parameters assessed',
            'âœ“ Fluid bolus given',
            'âœ“ Reassessment completed'
          ],
          nextSteps: 'Identify shock etiology. Obtain lactate, PCV/TS, electrolytes. Consider vasopressors for septic/refractory shock. Treat underlying cause.'
        },
        chf: {
          name: 'CHF Decompensation',
          category: 'Cardiac Emergency',
          steps: [
            { step: 1, text: 'Minimize stress (quiet environment)', highlight: true },
            { step: 2, text: 'Oxygen supplementation', highlight: true },
            { step: 3, text: 'Furosemide (high dose if severe)', highlight: true },
            { step: 4, text: 'POCUS thoracic (cage side)', highlight: false },
            { step: 5, text: 'Nitroglycerin Â± pimobendan', highlight: false },
            { step: 6, text: 'Monitor RR effort', highlight: false },
            { step: 7, text: 'Monitor perfusion', highlight: false }
          ],
          assessment: [
            { label: 'RR', value: 'Increased effort' },
            { label: 'Lungs', value: 'Crackles/wheeze' },
            { label: 'MM', value: 'May be cyanotic' },
            { label: 'Murmer', value: 'Often present' }
          ],
          redFlags: ['Respiratory distress', 'Cyanosis', 'Collapse', 'Syncope'],
          pearls: [
            'Keep patient in sternal position',
            'Handle minimally - stress kills',
            'Furosemide 2-4 mg/kg IV/IM',
            'Nitro: 1/4-1/2 inch topical'
          ],
          priority: 'Oxygen + Furosemide',
          priorityContext: 'Reduce preload immediately',
          drugs: [
            { name: 'Furosemide', dose: '2-4 mg/kg', route: 'IV/IM', note: 'Repeat q1-2h if needed' },
            { name: 'Pimobendan', dose: '0.25 mg/kg', route: 'PO', note: 'If not hypotensive' },
            { name: 'Nitroglycerin', dose: '1/4-1/2 inch', route: 'Topical', note: 'Auricular vasodilation' },
            { name: 'Morphine', dose: '0.1-0.5 mg/kg', route: 'IM', note: 'For severe distress' }
          ],
          checkpoints: [
            'âœ“ Oxygen provided',
            'âœ“ Furosemide administered',
            'âœ“ Stress minimized'
          ],
          nextSteps: 'Monitor respiratory rate and effort closely. Thoracic radiographs when stable. Consider torsemide if refractory. Address underlying cause.'
        },
        hyperkalemia: {
          name: 'Hyperkalemia',
          category: 'Metabolic Emergency',
          steps: [
            { step: 1, text: 'ECG immediately', highlight: true },
            { step: 2, text: 'Calcium gluconate (cardioprotective)', highlight: true },
            { step: 3, text: 'Regular insulin + dextrose', highlight: false },
            { step: 4, text: 'Fluid support (0.9% NaCl)', highlight: false },
            { step: 5, text: 'Remove underlying source', highlight: false },
            { step: 6, text: 'Recheck K+ q30-60min', highlight: false },
            { step: 7, text: 'Address cause (UO, addison\'s, etc)', highlight: false }
          ],
          assessment: [
            { label: 'K+', value: '>6.0 mEq/L' },
            { label: 'ECG', value: 'Peaked T waves â†’ brady' },
            { label: 'HR', value: 'Bradycardia (severe)' },
            { label: 'Perfusion', value: 'Poor if severe' }
          ],
          redFlags: ['K+ >8.0 mEq/L', 'Sine wave pattern', 'Asystole risk', 'Severe bradycardia'],
          pearls: [
            'Ca gluconate protects heart - fastest',
            'Insulin shifts K+ into cells',
            'Saline dilutes extracellular K+',
            'Treat underlying cause urgently'
          ],
          priority: 'ECG + Ca Gluconate',
          priorityContext: 'Cardiac membrane stabilization',
          drugs: [
            { name: 'Calcium gluconate 10%', dose: '0.5-1.5 mL/kg', route: 'IV', note: 'Slow over 5-10 min' },
            { name: 'Regular Insulin', dose: '0.25 U/kg', route: 'IV', note: 'With dextrose' },
            { name: 'Dextrose 50%', dose: '0.5-1 g/kg', route: 'IV', note: 'Follow insulin' },
            { name: 'Saline', dose: '2-3Ã— maintenance', route: 'IV', note: 'Dilutional effect' }
          ],
          checkpoints: [
            'âœ“ ECG monitored',
            'âœ“ Calcium gluconate given',
            'âœ“ Potassium-lowering therapy started'
          ],
          nextSteps: 'Treat underlying cause. Urethral obstruction â†’ relieve. Addison\'s â†’ steroids. Recheck K+ frequently. Monitor for rebound hypokalemia.'
        },
        uo: {
          name: 'Urethral Obstruction (Cat)',
          category: 'Urological Emergency',
          steps: [
            { step: 1, text: 'Stabilize (treat hyperK if present)', highlight: true },
            { step: 2, text: 'Analgesia (opioids)', highlight: true },
            { step: 3, text: 'Sedation for catheterization', highlight: true },
            { step: 4, text: 'Relieve obstruction', highlight: false },
            { step: 5, text: 'Correct electrolytes/acidosis', highlight: false },
            { step: 6, text: 'Monitor post-obstructive diuresis', highlight: false },
            { step: 7, text: 'Urinary catheter management', highlight: false }
          ],
          assessment: [
            { label: 'K+', value: 'Often elevated' },
            { label: 'Bladder', value: 'Large, firm, painful' },
            { label: 'Urine', value: 'Dribbling or absent' },
            { label: 'Systemic', value: 'Vomiting, depressed' }
          ],
          redFlags: ['K+ >7.0 mEq/L', 'Bradycardia', 'Hypothermia', 'Severe azotemia'],
          pearls: [
            'Treat hyperK before sedation',
            'Use lidocaine in urethra',
            'Unblock without delay if unstable',
            'Monitor for post-obstructive diuresis'
          ],
          priority: 'Stabilize + Unblock',
          priorityContext: 'Address hyperK first',
          drugs: [
            { name: 'Calcium gluconate', dose: 'If K+ >7', route: 'IV', note: 'Cardioprotection' },
            { name: 'Buprenorphine', dose: '0.02-0.03 mg/kg', route: 'IV', note: 'Analgesia' },
            { name: 'Ketamine/Valium', dose: 'Per protocol', route: 'IV', note: 'Sedation for catheter' },
            { name: 'Lidocaine', dose: 'Instill in urethra', route: 'Local', note: 'Topical anesthesia' }
          ],
          checkpoints: [
            'âœ“ HyperK addressed if present',
            'âœ“ Obstruction relieved',
            'âœ“ Urine flow established'
          ],
          nextSteps: 'Maintain urinary catheter 24-48h. Aggressive IV fluids for post-obstructive diuresis. Address underlying cause (crystals, stones, inflammation).'
        },
        heatstroke: {
          name: 'Heatstroke',
          category: 'Environmental Emergency',
          steps: [
            { step: 1, text: 'Controlled cooling (NOT ice)', highlight: true },
            { step: 2, text: 'Oxygen supplementation', highlight: true },
            { step: 3, text: 'IV access + perfusion support', highlight: true },
            { step: 4, text: 'Stop cooling at ~39.4Â°C', highlight: false },
            { step: 5, text: 'Coagulation monitoring', highlight: false },
            { step: 6, text: 'Organ injury surveillance', highlight: false },
            { step: 7, text: 'Treat complications (DIC, ARF)', highlight: false }
          ],
          assessment: [
            { label: 'Temp', value: '>40Â°C (104Â°F)' },
            { label: 'Mentation', value: 'Altered' },
            { label: 'MM', value: 'Hyperemic' },
            { label: 'Panting', value: 'Excessive' }
          ],
          redFlags: ['Temp >42Â°C', 'DIC signs', 'Severe CNS signs', 'Acute renal failure'],
          pearls: [
            'Cool with room temp water + fans',
            'Ice causes peripheral vasoconstriction',
            'Monitor for DIC (PT/aPTT, platelets)',
            'Check renal values, liver enzymes'
          ],
          priority: 'Controlled Cooling',
          priorityContext: 'Room temp water + air flow',
          drugs: [
            { name: 'Crystalloids', dose: 'Shock dose', route: 'IV', note: 'Perfusion support' },
            { name: 'Midazolam', dose: 'If seizures', route: 'IV', note: 'Control seizure activity' },
            { name: 'Ondansetron', dose: '0.1-0.2 mg/kg', route: 'IV', note: 'If vomiting' },
            { name: 'Plasma', dose: 'If coagulopathy', route: 'IV', note: 'For DIC treatment' }
          ],
          checkpoints: [
            'âœ“ Cooling initiated',
            'âœ“ Core temperature monitored',
            'âœ“ IV access established'
          ],
          nextSteps: 'Stop active cooling at 39.4Â°C. Monitor coagulation, renal function, liver enzymes. Watch for complications for 24-48 hours.'
        },
        sepsis: {
          name: 'Sepsis / SIRS',
          category: 'Infectious Emergency',
          steps: [
            { step: 1, text: 'Perfusion-guided fluids', highlight: true },
            { step: 2, text: 'Broad-spectrum antimicrobials early', highlight: true },
            { step: 3, text: 'Blood cultures if possible', highlight: true },
            { step: 4, text: 'Source control', highlight: false },
            { step: 5, text: 'Serial lactate/perfusion checks', highlight: false },
            { step: 6, text: 'Vasopressors if needed', highlight: false },
            { step: 7, text: 'Monitor for organ dysfunction', highlight: false }
          ],
          assessment: [
            { label: 'Temp', value: 'High or low' },
            { label: 'HR', value: 'Tachycardia' },
            { label: 'RR', value: 'Tachypnea' },
            { label: 'WBC', value: 'High or low' }
          ],
          redFlags: ['Hypotension refractory', 'Lactate >4 mmol/L', 'Altered mentation', 'Hypothermia'],
          pearls: [
            'Antibiotics within 1 hour',
            'Aggressive fluid resuscitation',
            'Identify and control source',
            'Lactate clearance prognostic'
          ],
          priority: 'Fluids + Antibiotics',
          priorityContext: 'Goal-directed therapy',
          drugs: [
            { name: 'Ampicillin + Sulbactam', dose: '22 mg/kg', route: 'IV', note: 'Q8h' },
            { name: 'Enrofloxacin', dose: '5 mg/kg', route: 'IV', note: 'Q24h (dogs)' },
            { name: 'Metronidazole', dose: '10 mg/kg', route: 'IV', note: 'Q12h if GI source' },
            { name: 'Norepinephrine', dose: '0.05-2 mcg/kg/min', route: 'CRI', note: 'If fluid refractory' }
          ],
          checkpoints: [
            'âœ“ Antibiotics within 1 hour',
            'âœ“ Fluid resuscitation started',
            'âœ“ Source identified'
          ],
          nextSteps: 'Source control (surgery if needed). Serial lactate monitoring. Consider vasopressors for MAP target. Monitor for SIRS organ dysfunction.'
        }
      };

      // Initialize
      document.addEventListener('DOMContentLoaded', function() {
        onAlgorithmChange();
      });

      // Algorithm selection handler
      function onAlgorithmChange() {
        const select = document.getElementById('algorithm-select');
        const key = select.value;
        const data = algorithmData[key];
        
        if (!data) return;

        // Update title and category
        document.getElementById('viz-title').textContent = data.name;
        document.getElementById('viz-category').textContent = data.category;

        // Build steps
        const stepsContainer = document.getElementById('algorithm-steps');
        stepsContainer.innerHTML = data.steps.map((step, index) => `
          <div class="pc-calc-result-card" style="border-left: 3px solid ${step.highlight ? 'var(--calc-primary)' : 'var(--calc-border)'};">
            <div style="display: flex; align-items: center; gap: 0.75rem;">
              <div style="width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; background: ${step.highlight ? 'var(--calc-primary)' : 'var(--calc-border)'}; color: ${step.highlight ? 'white' : 'var(--calc-text-muted)'}; border-radius: 50%; font-size: 0.875rem; font-weight: 600;">${step.step}</div>
              <div style="flex: 1;">
                <div style="font-size: 0.875rem; font-weight: 600;">${step.text}</div>
              </div>
            </div>
          </div>
        `).join('');

        // Build assessment points
        const assessmentContainer = document.getElementById('assessment-points');
        assessmentContainer.innerHTML = data.assessment.map(point => `
          <div class="pc-calc-drug-info__item">
            <div class="pc-calc-drug-info__label">${point.label}</div>
            <div class="pc-calc-drug-info__value">${point.value}</div>
          </div>
        `).join('');

        // Red flags
        const redFlagsEl = document.getElementById('red-flags');
        if (data.redFlags && data.redFlags.length > 0) {
          document.getElementById('red-flags-text').innerHTML = data.redFlags.join(' â€¢ ');
          redFlagsEl.style.display = 'flex';
        } else {
          redFlagsEl.style.display = 'none';
        }

        // Clinical pearls
        document.getElementById('clinical-pearls').innerHTML = data.pearls.map(pearl => `<li>${pearl}</li>`).join('');

        // Priority action
        document.getElementById('priority-action').textContent = data.priority;
        document.getElementById('priority-context').textContent = data.priorityContext;

        // Drug reference
        const drugContainer = document.getElementById('drug-reference');
        drugContainer.innerHTML = data.drugs.map(drug => `
          <div style="padding: 0.75rem; background: rgba(99, 102, 241, 0.05); border-radius: var(--calc-radius-sm); border: 1px solid rgba(99, 102, 241, 0.15);">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.25rem;">
              <span style="font-weight: 600; font-size: 0.875rem;">${drug.name}</span>
              <span style="font-size: 0.75rem; color: var(--calc-text-muted);">${drug.route}</span>
            </div>
            <div style="font-size: 0.8125rem; color: var(--calc-text);">${drug.dose}</div>
            <div style="font-size: 0.75rem; color: var(--calc-text-muted); margin-top: 0.25rem;">${drug.note}</div>
          </div>
        `).join('');

        // Checkpoints
        document.getElementById('checkpoints').innerHTML = data.checkpoints.map(cp => `<div style="margin-bottom: 0.25rem;">${cp}</div>`).join('');

        // Next steps
        document.getElementById('next-steps').textContent = data.nextSteps;
      }

      // Select algorithm by key
      function selectAlgorithm(key) {
        document.getElementById('algorithm-select').value = key;
        onAlgorithmChange();
      }

      // Filter category
      function filterCategory(category, btn) {
        // Update chip states
        btn.parentElement.querySelectorAll('.pc-calc-chip').forEach(chip => {
          chip.classList.remove('pc-calc-chip--active');
        });
        btn.classList.add('pc-calc-chip--active');

        // Filter options
        const select = document.getElementById('algorithm-select');
        const options = select.querySelectorAll('option');
        
        options.forEach(option => {
          if (category === 'all' || option.dataset.category?.includes(category)) {
            option.style.display = '';
          } else {
            option.style.display = 'none';
          }
        });
      }

      // Print algorithm
      function printAlgorithm() {
        window.print();
      }

      // Copy algorithm steps
      function copyAlgorithmSteps() {
        const select = document.getElementById('algorithm-select');
        const key = select.value;
        const data = algorithmData[key];
        
        if (!data) return;

        let text = `${data.name}\n${'='.repeat(data.name.length)}\n\n`;
        text += `Category: ${data.category}\n\n`;
        text += `First 60 Seconds: ${data.priority}\n\n`;
        text += 'Steps:\n';
        data.steps.forEach(step => {
          text += `${step.step}. ${step.text}\n`;
        });
        text += '\nKey Drugs:\n';
        data.drugs.forEach(drug => {
          text += `- ${drug.name}: ${drug.dose} ${drug.route}\n`;
        });

        navigator.clipboard.writeText(text).then(() => {
          showToast('Algorithm copied to clipboard', 'success');
        });
      }

      // Toast notification
      function showToast(message, type = 'info') {
        const container = document.querySelector('.pc-toast-container');
        const toast = document.createElement('div');
        toast.className = `pc-toast pc-toast--${type}`;
        toast.textContent = message;
        container.appendChild(toast);
        
        setTimeout(() => {
          toast.classList.add('pc-toast--show');
        }, 10);
        
        setTimeout(() => {
          toast.classList.remove('pc-toast--show');
          setTimeout(() => toast.remove(), 300);
        }, 3000);
      }
    </script>
  </body>
</html>
