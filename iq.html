<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HUMAN vs AI: IQ Challenge</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;500;700&display=swap');
        
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
        
    body {
      background: #0a0a0f;
      color: #e0e0ff;
      font-family: 'Rajdhani', sans-serif;
      min-height: 100vh;
      overflow-x: hidden;
      background-image: 
        radial-gradient(circle at 20% 50%, #1a1a2e 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, #16213e 0%, transparent 50%);
    }
        
    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 20px;
    }
        
    header {
      text-align: center;
      padding: 40px 0;
      border-bottom: 2px solid #00d4ff;
      margin-bottom: 30px;
      position: relative;
    }
        
    h1 {
      font-family: 'Orbitron', monospace;
      font-size: 3rem;
      background: linear-gradient(45deg, #00d4ff, #ff006e);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-transform: uppercase;
      letter-spacing: 4px;
      animation: glow 3s ease-in-out infinite alternate;
    }
        
    @keyframes glow {
      from { filter: drop-shadow(0 0 10px #00d4ff); }
      to { filter: drop-shadow(0 0 20px #ff006e); }
    }
        
    .subtitle {
      color: #8892b0;
      margin-top: 10px;
      font-size: 1.2rem;
      letter-spacing: 2px;
    }
        
    .vs-badge {
      display: inline-flex;
      align-items: center;
      gap: 20px;
      margin-top: 20px;
      font-family: 'Orbitron', monospace;
    }
        
    .player-tag {
      padding: 10px 30px;
      border: 2px solid;
      border-radius: 30px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 2px;
    }
        
    .human-tag {
      border-color: #00d4ff;
      color: #00d4ff;
      box-shadow: 0 0 15px rgba(0, 212, 255, 0.3);
    }
        
    .ai-tag {
      border-color: #ff006e;
      color: #ff006e;
      box-shadow: 0 0 15px rgba(255, 0, 110, 0.3);
    }
        
    .vs-text {
      font-size: 1.5rem;
      color: #ffd700;
    }
        
    .screen {
      display: none;
      animation: fadeIn 0.5s ease;
    }
        
    .screen.active {
      display: block;
    }
        
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
        
    .intro-card {
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      padding: 40px;
      text-align: center;
      backdrop-filter: blur(10px);
    }
        
    .test-info {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin: 30px 0;
    }
        
    .info-item {
      background: rgba(0, 212, 255, 0.05);
      padding: 20px;
      border-radius: 10px;
      border-left: 4px solid #00d4ff;
    }
        
    .info-item h3 {
      color: #00d4ff;
      margin-bottom: 10px;
      font-family: 'Orbitron', monospace;
    }
        
    .btn {
      background: linear-gradient(45deg, #00d4ff, #0099cc);
      border: none;
      color: #0a0a0f;
      padding: 18px 50px;
      font-size: 1.2rem;
      font-family: 'Orbitron', monospace;
      font-weight: 700;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.3s;
      text-transform: uppercase;
      letter-spacing: 2px;
      margin: 10px;
      position: relative;
      overflow: hidden;
    }
        
    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 30px rgba(0, 212, 255, 0.4);
    }
        
    .btn-secondary {
      background: transparent;
      border: 2px solid #00d4ff;
      color: #00d4ff;
    }
        
    .btn-secondary:hover {
      background: rgba(0, 212, 255, 0.1);
    }
        
    .game-interface {
      background: rgba(255, 255, 255, 0.02);
      border-radius: 20px;
      padding: 30px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
        
    .status-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      padding: 20px;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 15px;
      font-family: 'Orbitron', monospace;
    }
        
    .score-board {
      display: flex;
      gap: 30px;
    }
        
    .score-item {
      text-align: center;
    }
        
    .score-label {
      font-size: 0.8rem;
      color: #8892b0;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
        
    .score-value {
      font-size: 2rem;
      font-weight: 700;
    }
        
    .human-score { color: #00d4ff; }
    .ai-score { color: #ff006e; }
        
    .timer {
      font-size: 1.5rem;
      color: #ffd700;
      font-weight: 700;
    }
        
    .question-container {
      background: rgba(0, 0, 0, 0.4);
      border-radius: 15px;
      padding: 40px;
      margin-bottom: 30px;
      min-height: 300px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      border: 1px solid rgba(255, 255, 255, 0.1);
      position: relative;
      overflow: hidden;
    }
        
    .question-type {
      position: absolute;
      top: 20px;
      left: 20px;
      background: rgba(0, 212, 255, 0.2);
      color: #00d4ff;
      padding: 5px 15px;
      border-radius: 20px;
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
        
    .question-text {
      font-size: 1.5rem;
      text-align: center;
      margin-bottom: 30px;
      line-height: 1.6;
      font-weight: 500;
    }
        
    .pattern-box {
      display: flex;
      gap: 15px;
      justify-content: center;
      flex-wrap: wrap;
      margin: 20px 0;
    }
        
    .pattern-item {
      width: 80px;
      height: 80px;
      background: rgba(255, 255, 255, 0.1);
      border: 2px solid rgba(255, 255, 255, 0.2);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      font-weight: 700;
      transition: all 0.3s;
    }
        
    .options-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 15px;
      width: 100%;
      max-width: 600px;
    }
        
    .option-btn {
      background: rgba(255, 255, 255, 0.05);
      border: 2px solid rgba(255, 255, 255, 0.2);
      color: #e0e0ff;
      padding: 20px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 1.1rem;
      font-family: 'Rajdhani', sans-serif;
      font-weight: 600;
      transition: all 0.3s;
      position: relative;
      overflow: hidden;
    }
        
    .option-btn:hover:not(.disabled) {
      background: rgba(0, 212, 255, 0.2);
      border-color: #00d4ff;
      transform: translateX(5px);
    }
        
    .option-btn.correct {
      background: rgba(0, 255, 136, 0.2) !important;
      border-color: #00ff88 !important;
      color: #00ff88;
    }
        
    .option-btn.wrong {
      background: rgba(255, 0, 110, 0.2) !important;
      border-color: #ff006e !important;
      color: #ff006e;
    }
        
    .option-btn.disabled {
      cursor: not-allowed;
      opacity: 0.6;
    }
        
    .ai-thinking {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: rgba(255, 0, 110, 0.1);
      border: 1px solid #ff006e;
      padding: 20px;
      border-radius: 15px;
      display: none;
      align-items: center;
      gap: 15px;
      font-family: 'Orbitron', monospace;
      color: #ff006e;
      box-shadow: 0 0 20px rgba(255, 0, 110, 0.3);
    }
        
    .ai-thinking.active {
      display: flex;
      animation: pulse 1s infinite;
    }
        
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }
        
    .ai-avatar {
      width: 40px;
      height: 40px;
      background: #ff006e;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
    }
        
    .progress-bar {
      width: 100%;
      height: 6px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 3px;
      margin: 20px 0;
      overflow: hidden;
    }
        
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #00d4ff, #00ff88);
      transition: width 0.3s;
    }
        
    .results-screen {
      text-align: center;
    }
        
    .iq-circle {
      width: 250px;
      height: 250px;
      border-radius: 50%;
      background: conic-gradient(from 0deg, #00d4ff, #00ff88, #ffd700, #ff006e);
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      animation: rotate 10s linear infinite;
    }
        
    @keyframes rotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
        
    .iq-inner {
      width: 220px;
      height: 220px;
      background: #0a0a0f;
      border-radius: 50%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      animation: rotate 10s linear infinite reverse;
    }
        
    .iq-number {
      font-family: 'Orbitron', monospace;
      font-size: 4rem;
      font-weight: 900;
      background: linear-gradient(45deg, #00d4ff, #00ff88);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
        
    .iq-label {
      color: #8892b0;
      text-transform: uppercase;
      letter-spacing: 3px;
      font-size: 0.9rem;
    }
        
    .comparison-table {
      background: rgba(255, 255, 255, 0.03);
      border-radius: 15px;
      padding: 30px;
      margin: 30px 0;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
        
    .table-row {
      display: flex;
      justify-content: space-between;
      padding: 15px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
        
    .table-row:last-child {
      border-bottom: none;
      font-size: 1.3rem;
      font-weight: 700;
      color: #00ff88;
      margin-top: 10px;
      padding-top: 20px;
      border-top: 2px solid rgba(255, 255, 255, 0.2);
    }
        
    .winner-banner {
      font-size: 2rem;
      font-family: 'Orbitron', monospace;
      margin: 20px 0;
      padding: 20px;
      border-radius: 15px;
      text-transform: uppercase;
      letter-spacing: 3px;
    }
        
    .human-wins {
      background: rgba(0, 212, 255, 0.2);
      border: 2px solid #00d4ff;
      color: #00d4ff;
      animation: victory 2s ease infinite;
    }
        
    .ai-wins {
      background: rgba(255, 0, 110, 0.2);
      border: 2px solid #ff006e;
      color: #ff006e;
    }
        
    @keyframes victory {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
        
    .breakdown {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 15px;
      margin: 30px 0;
    }
        
    .skill-card {
      background: rgba(255, 255, 255, 0.05);
      padding: 20px;
      border-radius: 10px;
      border-top: 3px solid;
    }
        
    .skill-card.logical { border-color: #00d4ff; }
    .skill-card.spatial { border-color: #ff006e; }
    .skill-card.numerical { border-color: #ffd700; }
    .skill-card.verbal { border-color: #00ff88; }
        
    .skill-name {
      font-size: 0.9rem;
      color: #8892b0;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 10px;
    }
        
    .skill-score {
      font-size: 1.5rem;
      font-weight: 700;
    }
        
    @media (max-width: 600px) {
      h1 { font-size: 2rem; }
      .options-grid { grid-template-columns: 1fr; }
      .status-bar { flex-direction: column; gap: 15px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>Neural Challenge</h1>
      <div class="subtitle">Cognitive Supremacy Test</div>
      <div class="vs-badge">
        <span class="player-tag human-tag">You</span>
        <span class="vs-text">VS</span>
        <span class="player-tag ai-tag">Kimi AI</span>
      </div>
    </header>

    <!-- Intro Screen -->
    <div class="screen active" id="introScreen">
      <div class="intro-card">
        <h2 style="font-family: 'Orbitron', monospace; margin-bottom: 20px; color: #00d4ff;">Mission Briefing</h2>
        <p style="font-size: 1.2rem; line-height: 1.8; margin-bottom: 30px;">
          15 challenges. 4 cognitive dimensions. One winner.<br>
          Race against time while I attempt to solve the same problems simultaneously.<br>
          Your performance will be calculated into an estimated IQ score.
        </p>
                
        <div class="test-info">
          <div class="info-item">
            <h3>Pattern Recognition</h3>
            <p>Visual sequences and logical progressions</p>
          </div>
          <div class="info-item">
            <h3>Spatial Logic</h3>
            <p>3D manipulation and orientation</p>
          </div>
          <div class="info-item">
            <h3>Numerical Reasoning</h3>
            <p>Mathematical sequences and logic</p>
          </div>
          <div class="info-item">
            <h3>Verbal Analogy</h3>
            <p>Language relationships and logic</p>
          </div>
        </div>
                
        <button class="btn" onclick="startGame()">Initialize Test</button>
      </div>
    </div>

    <!-- Game Screen -->
    <div class="screen" id="gameScreen">
      <div class="game-interface">
        <div class="status-bar">
          <div class="score-board">
            <div class="score-item">
              <div class="score-label">You</div>
              <div class="score-value human-score" id="humanScore">0</div>
            </div>
            <div class="score-item">
              <div class="score-label">AI</div>
              <div class="score-value ai-score" id="aiScore">0</div>
            </div>
          </div>
          <div class="timer" id="timer">00:30</div>
        </div>
                
        <div class="progress-bar">
          <div class="progress-fill" id="progressBar" style="width: 0%"></div>
        </div>
                
        <div class="question-container" id="questionContainer">
          <div class="question-type" id="questionType">Pattern</div>
          <div class="question-text" id="questionText">Loading...</div>
          <div id="questionVisual"></div>
          <div class="options-grid" id="optionsGrid"></div>
        </div>
      </div>
    </div>

    <!-- AI Thinking Indicator -->
    <div class="ai-thinking" id="aiThinking">
      <div class="ai-avatar">AI</div>
      <div>
        <div style="font-weight: 700;">AI Processing</div>
        <div style="font-size: 0.9rem; opacity: 0.8;">Analyzing patterns...</div>
      </div>
    </div>

    <!-- Results Screen -->
    <div class="screen" id="resultsScreen">
      <div class="results-screen">
        <h2 style="font-family: 'Orbitron', monospace; font-size: 2.5rem; margin-bottom: 10px;">Test Complete</h2>
                
        <div class="iq-circle">
          <div class="iq-inner">
            <div class="iq-number" id="iqScore">120</div>
            <div class="iq-label">Estimated IQ</div>
          </div>
        </div>
                
        <div class="winner-banner" id="winnerBanner">
          Victory!
        </div>
                
        <div class="comparison-table">
          <div class="table-row">
            <span>Your Correct Answers</span>
            <span id="finalHumanScore">0/15</span>
          </div>
          <div class="table-row">
            <span>AI Correct Answers</span>
            <span id="finalAiScore">0/15</span>
          </div>
          <div class="table-row">
            <span>Average Response Time</span>
            <span id="avgTime">0s</span>
          </div>
          <div class="table-row">
            <span>Final Result</span>
            <span id="finalResult">Calculating...</span>
          </div>
        </div>
                
        <div class="breakdown">
          <div class="skill-card logical">
            <div class="skill-name">Pattern</div>
            <div class="skill-score" id="patternScore">85%</div>
          </div>
          <div class="skill-card spatial">
            <div class="skill-name">Spatial</div>
            <div class="skill-score" id="spatialScore">70%</div>
          </div>
          <div class="skill-card numerical">
            <div class="skill-name">Numerical</div>
            <div class="skill-score" id="numericalScore">90%</div>
          </div>
          <div class="skill-card verbal">
            <div class="skill-name">Verbal</div>
            <div class="skill-score" id="verbalScore">80%</div>
          </div>
        </div>
                
        <button class="btn" onclick="location.reload()">Retake Test</button>
        <button class="btn btn-secondary" onclick="shareResults()">Share Results</button>
      </div>
    </div>
  </div>

  <script>
    // Game State
    let currentQuestion = 0;
    let humanScore = 0;
    let aiScore = 0;
    let timeLeft = 30;
    let timerInterval;
    let startTime;
    let totalTime = 0;
    let categoryScores = {
      pattern: { correct: 0, total: 0 },
      spatial: { correct: 0, total: 0 },
      numerical: { correct: 0, total: 0 },
      verbal: { correct: 0, total: 0 }
    };

    // Question Database (15 questions)
    const questions = [
      // Pattern Recognition
      {
        type: 'Pattern',
        category: 'pattern',
        text: 'Complete the sequence:',
        visual: ['â—†', 'â—†â—†', 'â—†â—†â—†', '?'],
        options: ['â—†â—†â—†â—†', 'â—†â—†', 'â—†â—†â—†â—†â—†', 'â—†'],
        correct: 0,
        aiAccuracy: 0.95,
        aiTime: 2000
      },
      {
        type: 'Pattern',
        category: 'pattern',
        text: 'What comes next?',
        visual: ['2', '4', '8', '16', '?'],
        options: ['24', '32', '20', '30'],
        correct: 1,
        aiAccuracy: 0.98,
        aiTime: 1500
      },
      {
        type: 'Pattern',
        category: 'pattern',
        text: 'Complete the pattern:',
        visual: ['ðŸ…°', 'ðŸ…²', 'ðŸ…´', '?'],
        options: ['ðŸ…¶', 'ðŸ…µ', 'ðŸ…·', 'ðŸ…³'],
        correct: 0,
        aiAccuracy: 0.9,
        aiTime: 2200
      },
      {
        type: 'Pattern',
        category: 'pattern',
        text: 'Which shape breaks the rule?',
        visual: ['ðŸ”ºðŸ”ºðŸ”º', 'ðŸ”ºðŸ”ºðŸ”º', 'ðŸ”ºðŸ”ºðŸ”º', 'ðŸ”ºðŸ”ºðŸ”º'],
        options: ['Position 3', 'Position 1', 'Position 4', 'Position 2'],
        correct: 3,
        aiAccuracy: 0.85,
        aiTime: 3000
      },
            
      // Spatial Logic
      {
        type: 'Spatial',
        category: 'spatial',
        text: 'If you fold this cube, which face is opposite ðŸ”µ?',
        visual: ['ðŸ”µâ¬œâ¬œ', 'â¬œðŸŸ¥ðŸŸ¨', 'â¬œâ¬œðŸŸ©'],
        options: ['ðŸŸ¥', 'ðŸŸ¨', 'ðŸŸ©', 'â¬œ'],
        correct: 2,
        aiAccuracy: 0.88,
        aiTime: 3500
      },
      {
        type: 'Spatial',
        category: 'spatial',
        text: 'Rotate 90Â° clockwise:',
        visual: ['â†—ï¸'],
        options: ['â†˜ï¸', 'â†™ï¸', 'â†–ï¸', 'âž¡ï¸'],
        correct: 0,
        aiAccuracy: 0.92,
        aiTime: 1800
      },
      {
        type: 'Spatial',
        category: 'spatial',
        text: 'Mirror image of:',
        visual: ['ðŸŽª'],
        options: ['â›º', 'ðŸŽ­', 'ðŸŽ¨', 'ðŸŽ¬'],
        correct: 1,
        aiAccuracy: 0.87,
        aiTime: 2500
      },
      {
        type: 'Spatial',
        category: 'spatial',
        text: 'How many blocks in 3D structure?',
        visual: ['â¬›â¬›', 'â¬›â¬›â¬›', 'â¬›'],
        options: ['5', '6', '7', '8'],
        correct: 1,
        aiAccuracy: 0.9,
        aiTime: 2800
      },
            
      // Numerical Reasoning
      {
        type: 'Numerical',
        category: 'numerical',
        text: 'If 3 workers take 3 hours, how long for 9 workers?',
        visual: null,
        options: ['1 hour', '3 hours', '9 hours', '27 hours'],
        correct: 0,
        aiAccuracy: 0.96,
        aiTime: 2000
      },
      {
        type: 'Numerical',
        category: 'numerical',
        text: 'Next number: 1, 1, 2, 3, 5, 8, ?',
        visual: null,
        options: ['11', '13', '12', '21'],
        correct: 1,
        aiAccuracy: 0.99,
        aiTime: 1200
      },
      {
        type: 'Numerical',
        category: 'numerical',
        text: 'Which number is the odd one out?',
        visual: ['16', '25', '36', '49', '52'],
        options: ['16', '25', '36', '52'],
        correct: 3,
        aiAccuracy: 0.93,
        aiTime: 2400
      },
      {
        type: 'Numerical',
        category: 'numerical',
        text: 'Complete: 2, 6, 12, 20, ?',
        visual: null,
        options: ['28', '30', '32', '36'],
        correct: 1,
        aiAccuracy: 0.91,
        aiTime: 2600
      },
            
      // Verbal Analogy
      {
        type: 'Verbal',
        category: 'verbal',
        text: 'Book is to Reading as Fork is to:',
        visual: null,
        options: ['Cooking', 'Eating', 'Kitchen', 'Food'],
        correct: 1,
        aiAccuracy: 0.94,
        aiTime: 1800
      },
      {
        type: 'Verbal',
        category: 'verbal',
        text: 'Which word does not belong?',
        visual: ['Orange', 'Banana', 'Carrot', 'Apple'],
        options: ['Orange', 'Banana', 'Carrot', 'Apple'],
        correct: 2,
        aiAccuracy: 0.89,
        aiTime: 2100
      },
      {
        type: 'Verbal',
        category: 'verbal',
        text: 'Embarrassed is to Humiliated as Frightened is to:',
        visual: null,
        options: ['Terrified', 'Anxious', 'Nervous', 'Scared'],
        correct: 0,
        aiAccuracy: 0.86,
        aiTime: 3000
      },
      {
        type: 'Verbal',
        category: 'verbal',
        text: 'Rearrange to form a meaningful word: O C E A N',
        visual: null,
        options: ['CANOE', 'OCEAN', 'ACORN', 'CRONE'],
        correct: 0,
        aiAccuracy: 0.95,
        aiTime: 1500
      }
    ];

    function startGame() {
      document.getElementById('introScreen').classList.remove('active');
      document.getElementById('gameScreen').classList.add('active');
      currentQuestion = 0;
      humanScore = 0;
      aiScore = 0;
      totalTime = 0;
      loadQuestion();
    }

    function loadQuestion() {
      if (currentQuestion >= questions.length) {
        endGame();
        return;
      }

      const q = questions[currentQuestion];
      startTime = Date.now();
            
      // Update UI
      document.getElementById('questionType').textContent = q.type;
      document.getElementById('questionText').textContent = q.text;
      document.getElementById('progressBar').style.width = ((currentQuestion / questions.length) * 100) + '%';
            
      // Visual elements
      const visualContainer = document.getElementById('questionVisual');
      visualContainer.innerHTML = '';
      if (q.visual) {
        if (Array.isArray(q.visual)) {
          const box = document.createElement('div');
          box.className = 'pattern-box';
          q.visual.forEach(item => {
            const div = document.createElement('div');
            div.className = 'pattern-item';
            div.textContent = item;
            box.appendChild(div);
          });
          visualContainer.appendChild(box);
        } else {
          visualContainer.innerHTML = `<div style="font-size: 3rem; margin: 20px;">${q.visual}</div>`;
        }
      }
            
      // Options
      const grid = document.getElementById('optionsGrid');
      grid.innerHTML = '';
      q.options.forEach((opt, idx) => {
        const btn = document.createElement('button');
        btn.className = 'option-btn';
        btn.textContent = opt;
        btn.onclick = () => selectAnswer(idx);
        grid.appendChild(btn);
      });
            
      // Start timer
      timeLeft = 30;
      updateTimer();
      timerInterval = setInterval(() => {
        timeLeft--;
        updateTimer();
        if (timeLeft <= 0) {
          selectAnswer(-1); // Time out
        }
      }, 1000);
            
      // AI simulation
      simulateAI(q);
    }

    function updateTimer() {
      const mins = Math.floor(timeLeft / 60);
      const secs = timeLeft % 60;
      document.getElementById('timer').textContent = 
        `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
      document.getElementById('timer').style.color = timeLeft < 10 ? '#ff006e' : '#ffd700';
    }

    function simulateAI(question) {
      const aiThinking = document.getElementById('aiThinking');
      aiThinking.classList.add('active');
            
      setTimeout(() => {
        aiThinking.classList.remove('active');
        if (Math.random() < question.aiAccuracy) {
          aiScore++;
          document.getElementById('aiScore').textContent = aiScore;
        }
      }, question.aiTime);
    }

    function selectAnswer(choice) {
      clearInterval(timerInterval);
      const q = questions[currentQuestion];
      const timeTaken = (Date.now() - startTime) / 1000;
      totalTime += timeTaken;
            
      // Track category
      categoryScores[q.category].total++;
            
      // Disable buttons
      document.querySelectorAll('.option-btn').forEach(btn => {
        btn.classList.add('disabled');
        btn.disabled = true;
      });
            
      // Check answer
      const buttons = document.querySelectorAll('.option-btn');
      if (choice === q.correct) {
        buttons[choice].classList.add('correct');
        humanScore++;
        categoryScores[q.category].correct++;
        document.getElementById('humanScore').textContent = humanScore;
      } else if (choice !== -1) {
        buttons[choice].classList.add('wrong');
        buttons[q.correct].classList.add('correct');
      } else {
        buttons[q.correct].classList.add('correct');
      }
            
      // Next question delay
      setTimeout(() => {
        currentQuestion++;
        loadQuestion();
      }, 1500);
    }

    function endGame() {
      document.getElementById('gameScreen').classList.remove('active');
      document.getElementById('resultsScreen').classList.add('active');
            
      // Calculate IQ (100 base, +5 per correct, -2 per wrong, time bonus)
      let estimatedIQ = 100;
      estimatedIQ += (humanScore * 5);
      estimatedIQ -= ((15 - humanScore) * 2);
            
      // Time bonus
      const avgTime = totalTime / 15;
      if (avgTime < 10) estimatedIQ += 10;
      else if (avgTime < 20) estimatedIQ += 5;
            
      // Cap IQ
      estimatedIQ = Math.max(80, Math.min(160, estimatedIQ));
            
      document.getElementById('iqScore').textContent = Math.round(estimatedIQ);
      document.getElementById('finalHumanScore').textContent = `${humanScore}/15`;
      document.getElementById('finalAiScore').textContent = `${aiScore}/15`;
      document.getElementById('avgTime').textContent = `${avgTime.toFixed(1)}s`;
            
      // Winner determination
      const banner = document.getElementById('winnerBanner');
      if (humanScore > aiScore) {
        banner.textContent = 'ðŸ† Victory! Human Superiority Confirmed';
        banner.className = 'winner-banner human-wins';
        document.getElementById('finalResult').textContent = 'HUMAN DOMINANCE';
      } else if (aiScore > humanScore) {
        banner.textContent = 'ðŸ¤– AI Supremacy Achieved';
        banner.className = 'winner-banner ai-wins';
        document.getElementById('finalResult').textContent = 'AI SUPERIORITY';
      } else {
        banner.textContent = 'âš¡ Perfect Equilibrium';
        banner.style.background = 'rgba(255, 215, 0, 0.2)';
        banner.style.borderColor = '#ffd700';
        banner.style.color = '#ffd700';
        document.getElementById('finalResult').textContent = 'TIE - PARALLEL MINDS';
      }
            
      // Category breakdown
      for (let cat in categoryScores) {
        const pct = categoryScores[cat].total > 0 
          ? Math.round((categoryScores[cat].correct / categoryScores[cat].total) * 100)
          : 0;
        document.getElementById(`${cat}Score`).textContent = `${pct}%`;
      }
    }

    function shareResults() {
      const text = `I scored ${document.getElementById('iqScore').textContent} IQ in Human vs AI Challenge! ${humanScore > aiScore ? 'I beat the AI!' : 'The AI got me...'} Can you do better?`;
      navigator.clipboard.writeText(text).then(() => {
        alert('Results copied to clipboard!');
      });
    }
  </script>
</body>
</html>
